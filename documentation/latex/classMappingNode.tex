\hypertarget{classMappingNode}{}\section{Mapping\+Node Class Reference}
\label{classMappingNode}\index{Mapping\+Node@{Mapping\+Node}}


{\ttfamily \#include $<$mapping\+\_\+node.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classMappingNode_a6e55235771f4c40028563623b1ca87fa}\label{classMappingNode_a6e55235771f4c40028563623b1ca87fa}} 
\hyperlink{classMappingNode_a6e55235771f4c40028563623b1ca87fa}{Mapping\+Node} ()
\begin{DoxyCompactList}\small\item\em Contructor. Initialize an empty map. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a50a65856eee4bd02fd3a09e145d1a976}\label{classMappingNode_a50a65856eee4bd02fd3a09e145d1a976}} 
\hyperlink{classMappingNode_a50a65856eee4bd02fd3a09e145d1a976}{$\sim$\+Mapping\+Node} ()
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
void \hyperlink{classMappingNode_a2852fa151856879640e6425ebb56d112}{target\+Detected\+Publisher} ()
\item 
void \hyperlink{classMappingNode_a496131230fe880f4155bb8e0363014d6}{publish\+Pose\+Visual} (ucl\+\_\+drone\+::\+Pose3D \hyperlink{classMappingNode_a17b9d538c600192cabffacb62fba76b5}{Pn\+P\+\_\+pose}, ucl\+\_\+drone\+::\+Pose3D frame\+\_\+pose)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classMappingNode_ae28a4c1af11db9e6eb56ffe52efd5877}\label{classMappingNode_ae28a4c1af11db9e6eb56ffe52efd5877}} 
\hyperlink{classMap}{Map} \hyperlink{classMappingNode_ae28a4c1af11db9e6eb56ffe52efd5877}{map}
\begin{DoxyCompactList}\small\item\em \hyperlink{classMap}{Map} object containing the \hyperlink{classMap}{Map} and most mapping functions. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a17b9d538c600192cabffacb62fba76b5}\label{classMappingNode_a17b9d538c600192cabffacb62fba76b5}} 
ucl\+\_\+drone\+::\+Pose3D \hyperlink{classMappingNode_a17b9d538c600192cabffacb62fba76b5}{Pn\+P\+\_\+pose}
\begin{DoxyCompactList}\small\item\em Pose computed from PnP (visual pose) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a8c15195ff027224d02c9c541bbe4ffb8}\label{classMappingNode_a8c15195ff027224d02c9c541bbe4ffb8}} 
boost\+::shared\+\_\+ptr$<$ pcl\+::visualization\+::\+P\+C\+L\+Visualizer $>$ \hyperlink{classMappingNode_a8c15195ff027224d02c9c541bbe4ffb8}{visualizer}
\begin{DoxyCompactList}\small\item\em Object to visualize the pointcloud. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{classMappingNode_aa5cfb0863500af4ec0dcb49b18b9f155}{processed\+Image\+Cb} (const ucl\+\_\+drone\+::\+Processed\+Image\+Msg\+::\+Const\+Ptr processed\+\_\+image\+\_\+in)
\begin{DoxyCompactList}\small\item\em Callbacks. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a01b2cd3fe9b949f9ae59d7261ae13eb5}\label{classMappingNode_a01b2cd3fe9b949f9ae59d7261ae13eb5}} 
void \hyperlink{classMappingNode_a01b2cd3fe9b949f9ae59d7261ae13eb5}{reset\+Pose\+Cb} (const std\+\_\+msgs\+::\+Empty \&msg)
\begin{DoxyCompactList}\small\item\em Callback for when a pose reset message is received. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a60f20841c8125d6acca19ce6d6462b4c}\label{classMappingNode_a60f20841c8125d6acca19ce6d6462b4c}} 
void \hyperlink{classMappingNode_a60f20841c8125d6acca19ce6d6462b4c}{end\+Reset\+Pose\+Cb} (const std\+\_\+msgs\+::\+Empty \&msg)
\begin{DoxyCompactList}\small\item\em Callback for when an end pose reset message is received. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_ab67be9da4e7f72ba8b740d0f38409a5c}\label{classMappingNode_ab67be9da4e7f72ba8b740d0f38409a5c}} 
void \hyperlink{classMappingNode_ab67be9da4e7f72ba8b740d0f38409a5c}{strategy\+Cb} (const ucl\+\_\+drone\+::\+Strategy\+Msg\+::\+Const\+Ptr strategy\+Ptr)
\begin{DoxyCompactList}\small\item\em Callback for when a strategy message is received. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a55e3043aee9d68444e8408e0028bec14}\label{classMappingNode_a55e3043aee9d68444e8408e0028bec14}} 
void \hyperlink{classMappingNode_a55e3043aee9d68444e8408e0028bec14}{bundled\+Cb} (const ucl\+\_\+drone\+::\+Bundle\+Msg\+::\+Const\+Ptr bundle\+Ptr)
\begin{DoxyCompactList}\small\item\em Callback for when the output of bundle adjustment is received. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a63b44a6796f1990ca5e5c0a2d39b1646}\label{classMappingNode_a63b44a6796f1990ca5e5c0a2d39b1646}} 
void \hyperlink{classMappingNode_a63b44a6796f1990ca5e5c0a2d39b1646}{manual\+Pose\+Cb} (const ucl\+\_\+drone\+::\+Pose3\+D\+::\+Const\+Ptr pose\+Ptr)
\begin{DoxyCompactList}\small\item\em Callback for when a manual pose is received (from user) \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classMappingNode_a139d9714856342de62b712b6e114a2ea}\label{classMappingNode_a139d9714856342de62b712b6e114a2ea}} 
ros\+::\+Node\+Handle \hyperlink{classMappingNode_a139d9714856342de62b712b6e114a2ea}{nh}
\begin{DoxyCompactList}\small\item\em R\+OS node handle. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_af35bfe4546a06ed5f9d4e06a71b706fa}\label{classMappingNode_af35bfe4546a06ed5f9d4e06a71b706fa}} 
std\+::string \hyperlink{classMappingNode_af35bfe4546a06ed5f9d4e06a71b706fa}{strategy\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for strategy messages. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a3f21681b24d45f02e4e73958367147db}\label{classMappingNode_a3f21681b24d45f02e4e73958367147db}} 
ros\+::\+Subscriber \hyperlink{classMappingNode_a3f21681b24d45f02e4e73958367147db}{strategy\+\_\+sub}
\begin{DoxyCompactList}\small\item\em Subscriber to strategy messages. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a1f67492ac5c1df268061350d038c2bec}\label{classMappingNode_a1f67492ac5c1df268061350d038c2bec}} 
std\+::string \hyperlink{classMappingNode_a1f67492ac5c1df268061350d038c2bec}{processed\+\_\+image\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for processed images. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_accf8f357a71da4fe46d2ffadb300dc93}\label{classMappingNode_accf8f357a71da4fe46d2ffadb300dc93}} 
ros\+::\+Subscriber \hyperlink{classMappingNode_accf8f357a71da4fe46d2ffadb300dc93}{processed\+\_\+image\+\_\+sub}
\begin{DoxyCompactList}\small\item\em Subscriber to processed images. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a44acf27c881fa63381fff82e47256013}\label{classMappingNode_a44acf27c881fa63381fff82e47256013}} 
std\+::string \hyperlink{classMappingNode_a44acf27c881fa63381fff82e47256013}{bundled\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for the result of bundle adjustment. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a1e5c97dce7fb51bfaa72feb35c347722}\label{classMappingNode_a1e5c97dce7fb51bfaa72feb35c347722}} 
ros\+::\+Subscriber \hyperlink{classMappingNode_a1e5c97dce7fb51bfaa72feb35c347722}{bundled\+\_\+sub}
\begin{DoxyCompactList}\small\item\em Subscriber to the result of bundle adjustment. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a9a1f52834bd83b17a42480eb6c8f6006}\label{classMappingNode_a9a1f52834bd83b17a42480eb6c8f6006}} 
std\+::string \hyperlink{classMappingNode_a9a1f52834bd83b17a42480eb6c8f6006}{mpe\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for manual pose estimation. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a4232e49c66a581c5c2a02210b535a5c9}\label{classMappingNode_a4232e49c66a581c5c2a02210b535a5c9}} 
ros\+::\+Subscriber \hyperlink{classMappingNode_a4232e49c66a581c5c2a02210b535a5c9}{mpe\+\_\+sub}
\begin{DoxyCompactList}\small\item\em Subscriber to manual pose estimation. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a879300a066e593dd2a6487c6817519bf}\label{classMappingNode_a879300a066e593dd2a6487c6817519bf}} 
std\+::string \hyperlink{classMappingNode_a879300a066e593dd2a6487c6817519bf}{reset\+\_\+pose\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for pose reset. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a4648040b15f5692bf1127147a524e436}\label{classMappingNode_a4648040b15f5692bf1127147a524e436}} 
ros\+::\+Subscriber \hyperlink{classMappingNode_a4648040b15f5692bf1127147a524e436}{reset\+\_\+pose\+\_\+sub}
\begin{DoxyCompactList}\small\item\em Subscriber to pose reset. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_ada791eb20291439b5ca69e128eb8e604}\label{classMappingNode_ada791eb20291439b5ca69e128eb8e604}} 
std\+::string \hyperlink{classMappingNode_ada791eb20291439b5ca69e128eb8e604}{end\+\_\+reset\+\_\+pose\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for end of pose reset. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_af6e03e25fecc3edf9f5d543c1655dd6a}\label{classMappingNode_af6e03e25fecc3edf9f5d543c1655dd6a}} 
ros\+::\+Subscriber \hyperlink{classMappingNode_af6e03e25fecc3edf9f5d543c1655dd6a}{end\+\_\+reset\+\_\+pose\+\_\+sub}
\begin{DoxyCompactList}\small\item\em Subscriber to end of pose reset. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a6532a41e1cb41184a8b7681b075b5fd1}\label{classMappingNode_a6532a41e1cb41184a8b7681b075b5fd1}} 
std\+::string \hyperlink{classMappingNode_a6532a41e1cb41184a8b7681b075b5fd1}{pose\+\_\+visual\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for visual pose. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a7e30625597a807c4eb998cda3a5c6b9f}\label{classMappingNode_a7e30625597a807c4eb998cda3a5c6b9f}} 
ros\+::\+Publisher \hyperlink{classMappingNode_a7e30625597a807c4eb998cda3a5c6b9f}{pose\+\_\+visual\+\_\+pub}
\begin{DoxyCompactList}\small\item\em Publisher of visual pose. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a29383fef3ac44554a3c5a50800f48a8d}\label{classMappingNode_a29383fef3ac44554a3c5a50800f48a8d}} 
std\+::string \hyperlink{classMappingNode_a29383fef3ac44554a3c5a50800f48a8d}{pose\+\_\+correction\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for pose correction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a38d028c0b4bb2f4fc4692046855372b2}\label{classMappingNode_a38d028c0b4bb2f4fc4692046855372b2}} 
ros\+::\+Publisher \hyperlink{classMappingNode_a38d028c0b4bb2f4fc4692046855372b2}{pose\+\_\+correction\+\_\+pub}
\begin{DoxyCompactList}\small\item\em Publisher of pose correction. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a28926a34cd7b7a9f78ecf18d6694d0e2}\label{classMappingNode_a28926a34cd7b7a9f78ecf18d6694d0e2}} 
std\+::string \hyperlink{classMappingNode_a28926a34cd7b7a9f78ecf18d6694d0e2}{target\+\_\+channel}
\begin{DoxyCompactList}\small\item\em Channel for target. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_af0c6505ace8e4868f338ea3dc544c85f}\label{classMappingNode_af0c6505ace8e4868f338ea3dc544c85f}} 
ros\+::\+Publisher \hyperlink{classMappingNode_af0c6505ace8e4868f338ea3dc544c85f}{target\+\_\+pub}
\begin{DoxyCompactList}\small\item\em Publisher of target. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a7083893a6a4bd5755b6cf04f1f9cc008}\label{classMappingNode_a7083893a6a4bd5755b6cf04f1f9cc008}} 
ucl\+\_\+drone\+::\+Processed\+Image\+Msg\+::\+Const\+Ptr \hyperlink{classMappingNode_a7083893a6a4bd5755b6cf04f1f9cc008}{last\+Processed\+Img\+Received}
\begin{DoxyCompactList}\small\item\em last \hyperlink{classProcessedImage}{Processed\+Image} message received \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a1bdd3a86b880b4fc73f397f36ad49d74}\label{classMappingNode_a1bdd3a86b880b4fc73f397f36ad49d74}} 
int \hyperlink{classMappingNode_a1bdd3a86b880b4fc73f397f36ad49d74}{strategy}
\begin{DoxyCompactList}\small\item\em current strategy \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a13d71a5d6e02e7dfceebfcd94d57f39c}\label{classMappingNode_a13d71a5d6e02e7dfceebfcd94d57f39c}} 
bool \hyperlink{classMappingNode_a13d71a5d6e02e7dfceebfcd94d57f39c}{pending\+\_\+reset}
\begin{DoxyCompactList}\small\item\em true during a reset \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classMappingNode_a7024e23c7cd63b2f18ac48eff9ffcc37}\label{classMappingNode_a7024e23c7cd63b2f18ac48eff9ffcc37}} 
bool {\bfseries target\+\_\+detected}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This object wraps functions to execute the mapping node 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classMappingNode_aa5cfb0863500af4ec0dcb49b18b9f155}\label{classMappingNode_aa5cfb0863500af4ec0dcb49b18b9f155}} 
\index{Mapping\+Node@{Mapping\+Node}!processed\+Image\+Cb@{processed\+Image\+Cb}}
\index{processed\+Image\+Cb@{processed\+Image\+Cb}!Mapping\+Node@{Mapping\+Node}}
\subsubsection{\texorpdfstring{processed\+Image\+Cb()}{processedImageCb()}}
{\footnotesize\ttfamily void Mapping\+Node\+::processed\+Image\+Cb (\begin{DoxyParamCaption}\item[{const ucl\+\_\+drone\+::\+Processed\+Image\+Msg\+::\+Const\+Ptr}]{processed\+\_\+image\+\_\+in }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Callbacks. 

Callback for when a Processe\+Image\+Msh is received. Called at every image frame. \mbox{\Hypertarget{classMappingNode_a496131230fe880f4155bb8e0363014d6}\label{classMappingNode_a496131230fe880f4155bb8e0363014d6}} 
\index{Mapping\+Node@{Mapping\+Node}!publish\+Pose\+Visual@{publish\+Pose\+Visual}}
\index{publish\+Pose\+Visual@{publish\+Pose\+Visual}!Mapping\+Node@{Mapping\+Node}}
\subsubsection{\texorpdfstring{publish\+Pose\+Visual()}{publishPoseVisual()}}
{\footnotesize\ttfamily void Mapping\+Node\+::publish\+Pose\+Visual (\begin{DoxyParamCaption}\item[{ucl\+\_\+drone\+::\+Pose3D}]{Pn\+P\+\_\+pose,  }\item[{ucl\+\_\+drone\+::\+Pose3D}]{frame\+\_\+pose }\end{DoxyParamCaption})}

This method publishes a message containing the visual pose estimation 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pose\+Frame} & Pose published by sensors when the camera picture was received \\
\hline
\mbox{\tt in}  & {\em pose\+PnP} & Pose estimated with visual information and the contents of the map \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classMappingNode_a2852fa151856879640e6425ebb56d112}\label{classMappingNode_a2852fa151856879640e6425ebb56d112}} 
\index{Mapping\+Node@{Mapping\+Node}!target\+Detected\+Publisher@{target\+Detected\+Publisher}}
\index{target\+Detected\+Publisher@{target\+Detected\+Publisher}!Mapping\+Node@{Mapping\+Node}}
\subsubsection{\texorpdfstring{target\+Detected\+Publisher()}{targetDetectedPublisher()}}
{\footnotesize\ttfamily void Mapping\+Node\+::target\+Detected\+Publisher (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

This method publishes a message if the last Image\+Processed contains information about the target detection and add the estimated pose of the detected target in world coordinates 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/ucl\+\_\+drone/map/\hyperlink{mapping__node_8h}{mapping\+\_\+node.\+h}\end{DoxyCompactItemize}
