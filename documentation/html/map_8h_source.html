<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ucl_drone: include/ucl_drone/map/map.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ucl_drone
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_f46dbc2d76058abcdb7c9876cfb37288.html">ucl_drone</a></li><li class="navelem"><a class="el" href="dir_2e3c74aaa12ed64ee2169e4eb4ebcb39.html">map</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">map.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="map_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#ifndef ucl_drone_MAP_H</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#define ucl_drone_MAP_H</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#define PCL_NO_PRECOMPILE</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="profiling_8h.html">ucl_drone/profiling.h</a>&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/* Header files */</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ucl__drone_8h.html">ucl_drone/ucl_drone.h</a>&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;ros/package.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;ros/ros.h&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;tf/transform_datatypes.h&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span> <span class="comment">//std::map key-value pair</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// vision</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;opencv2/calib3d/calib3d.hpp&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;opencv2/core/core.hpp&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;opencv2/imgproc/imgproc.hpp&gt;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;opencv2/nonfree/features2d.hpp&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;opencv2/nonfree/nonfree.hpp&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;opencv2/contrib/contrib.hpp&gt;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">/* Point Cloud library */</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;pcl/visualization/point_cloud_geometry_handlers.h&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;pcl/common/common_headers.h&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;pcl/point_types.h&gt;</span>  <span class="comment">// pcl::PointXYZRGB</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;pcl/visualization/cloud_viewer.h&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;pcl/visualization/pcl_visualizer.h&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;pcl_conversions/pcl_conversions.h&gt;</span>  <span class="comment">// pcl::fromROSMsg</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;pcl_ros/point_cloud.h&gt;</span>              <span class="comment">// pcl::PointCloud</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/* Boost */</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;boost/shared_ptr.hpp&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;boost/thread/thread.hpp&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">/* Messages */</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;sensor_msgs/image_encodings.h&gt;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;std_msgs/Int16.h&gt;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;std_msgs/Empty.h&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/* ucl_drone */</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;ucl_drone/Pose3D.h&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;ucl_drone/BenchmarkInfoMsg.h&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;ucl_drone/ProcessedImageMsg.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;ucl_drone/BundleMsg.h&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;ucl_drone/TargetDetected.h&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="projection__2D_8h.html">ucl_drone/map/projection_2D.h</a>&gt;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="opencv__utils_8h.html">ucl_drone/opencv_utils.h</a>&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="read__from__launch_8h.html">ucl_drone/read_from_launch.h</a>&gt;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="keyframe_8h.html">ucl_drone/map/keyframe.h</a>&gt;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="frame_8h.html">ucl_drone/map/frame.h</a>&gt;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="landmark_8h.html">ucl_drone/map/landmark.h</a>&gt;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="map__utils_8h.html">ucl_drone/map/map_utils.h</a>&gt;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="camera_8h.html">ucl_drone/map/camera.h</a>&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classMap.html">   71</a></span>&#160;<span class="keyword">class </span><a class="code" href="classMap.html">Map</a></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// Some static const parameters</span></div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classMap.html#a688d93e7daa5dacfdcf68041fc0ce683">   75</a></span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classMap.html#a688d93e7daa5dacfdcf68041fc0ce683">threshold_lost</a> = 10; </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">//Nodehandle and publisher to communicate with bundle adjuster</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="classMap.html#a4bf0c12711369ea6ca8da6d1f1b2ad2f">   78</a></span>&#160;  ros::NodeHandle* <a class="code" href="classMap.html#a4bf0c12711369ea6ca8da6d1f1b2ad2f">nh</a>;  </div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classMap.html#ace0707010dc9f99268170b69b1a390e7">   79</a></span>&#160;  std::string    <a class="code" href="classMap.html#ace0707010dc9f99268170b69b1a390e7">bundle_channel</a>;     </div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classMap.html#a19f0dddf99a284cffef5c1119bc4dde4">   80</a></span>&#160;  ros::Publisher <a class="code" href="classMap.html#a19f0dddf99a284cffef5c1119bc4dde4">bundle_pub</a>;         </div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="classMap.html#a89c73a3c3de88c3656ded53b7ff28c4f">   81</a></span>&#160;  std::string    <a class="code" href="classMap.html#a89c73a3c3de88c3656ded53b7ff28c4f">benchmark_channel</a>;  </div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classMap.html#a96dea5fd8286b76a01685e97c0972002">   82</a></span>&#160;  ros::Publisher <a class="code" href="classMap.html#a96dea5fd8286b76a01685e97c0972002">benchmark_pub</a>;      </div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="comment">//ROS parameters (can be set in lauch files)</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classMap.html#a8c2c3f9134ec1c77288b6147c4249897">   85</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#a8c2c3f9134ec1c77288b6147c4249897">thresh_descriptor_match</a>; </div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classMap.html#a575ed053aec5a34555ee9642b95765eb">   86</a></span>&#160;  <span class="keywordtype">int</span>    <a class="code" href="classMap.html#a575ed053aec5a34555ee9642b95765eb">max_matches</a>;             </div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classMap.html#a8a3acc93b77883137eba917691492674">   87</a></span>&#160;  <span class="keywordtype">bool</span>   <a class="code" href="classMap.html#a8a3acc93b77883137eba917691492674">no_bundle_adjustment</a>;    </div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classMap.html#abef231667d94cca21fe6afd15f6b7cc0">   88</a></span>&#160;  <span class="keywordtype">bool</span>   <a class="code" href="classMap.html#abef231667d94cca21fe6afd15f6b7cc0">only_init</a>;               </div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classMap.html#ac931ea7b0cb5591952779c5e5ab6192e">   89</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#ac931ea7b0cb5591952779c5e5ab6192e">outlier_threshold</a>; </div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classMap.html#aa7020f7c1d53310e0d8c6b616038fc0e">   90</a></span>&#160;  <span class="keywordtype">bool</span>   <a class="code" href="classMap.html#aa7020f7c1d53310e0d8c6b616038fc0e">manual_keyframes</a>;  </div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classMap.html#a2472bc3b74a98eb9158ad866727ffee0">   91</a></span>&#160;  <span class="keywordtype">bool</span>   <a class="code" href="classMap.html#a2472bc3b74a98eb9158ad866727ffee0">sonar_unavailable</a>; </div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classMap.html#a794eea744a2ea7532fd6cf99a015410d">   92</a></span>&#160;  <span class="keywordtype">int</span>    <a class="code" href="classMap.html#a794eea744a2ea7532fd6cf99a015410d">n_kf_local_ba</a>;     </div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classMap.html#a0452c93c8870a6cb76660fb75be202fb">   93</a></span>&#160;  <span class="keywordtype">int</span>    <a class="code" href="classMap.html#a0452c93c8870a6cb76660fb75be202fb">freq_global_ba</a>;    </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">//ROS parameters (used for keyframe needed decision)</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classMap.html#a45d93dc7966ef968d3730754526549ea">   96</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#a45d93dc7966ef968d3730754526549ea">min_dist</a>; </div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classMap.html#a080c23dee123aa9c5ddabb012a43ea55">   97</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#a080c23dee123aa9c5ddabb012a43ea55">min_time</a>; </div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classMap.html#af5695f2e241107aa812cc5c1826fef37">   98</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#af5695f2e241107aa812cc5c1826fef37">inliers_thresh</a>; </div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classMap.html#a35fc2ab0486f0f82512c0eb6bf4b1ccd">   99</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#a35fc2ab0486f0f82512c0eb6bf4b1ccd">FOV_thresh</a>;     </div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classMap.html#a57996d0d3379ead3e4e7877db836ef33">  100</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#a57996d0d3379ead3e4e7877db836ef33">time_thresh</a>;    </div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classMap.html#afc0703cae7e706c952f45685a74d0626">  101</a></span>&#160;  <span class="keywordtype">double</span> <a class="code" href="classMap.html#afc0703cae7e706c952f45685a74d0626">dist_thresh</a>;    </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classMap.html#a42aaec155f0d5f18aeda45a0bebb5d71">  103</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classMap.html#a42aaec155f0d5f18aeda45a0bebb5d71">is_adjusting_bundle</a>; </div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classMap.html#af5a5af988716e8be41c5129fff01d73a">  104</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classMap.html#af5a5af988716e8be41c5129fff01d73a">n_inliers_moving_avg</a>; </div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classMap.html#aa0395513a7ef43438f5ee965e3b9f2dd">  105</a></span>&#160;  ros::Time <a class="code" href="classMap.html#aa0395513a7ef43438f5ee965e3b9f2dd">last_new_keyframe</a>; </div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classMap.html#ac029a5c3bdc1a95c39519a30c2435670">  106</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classMap.html#ac029a5c3bdc1a95c39519a30c2435670">kf_since_last_global_BA</a>; </div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classMap.html#a7183a0cc5d16367c2248eb7db0e6839a">  108</a></span>&#160;  std::vector&lt;double&gt; <a class="code" href="classMap.html#a7183a0cc5d16367c2248eb7db0e6839a">BA_times</a>;    </div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classMap.html#a5d91c796d77673ab8751fe0549ee36aa">  109</a></span>&#160;  std::vector&lt;int&gt;    <a class="code" href="classMap.html#a5d91c796d77673ab8751fe0549ee36aa">BA_num_iter</a>; </div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classMap.html#ad3aacc2f037e8c13212129d34d0e161f">  111</a></span>&#160;  <a class="code" href="structCamera.html">Camera</a> <a class="code" href="classMap.html#ad3aacc2f037e8c13212129d34d0e161f">camera</a>; </div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classMap.html#a08c5f5b93d3b296eab01d0f0702822ae">  112</a></span>&#160;  ucl_drone::Pose3D <a class="code" href="classMap.html#a08c5f5b93d3b296eab01d0f0702822ae">manual_pose</a>; </div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classMap.html#a34358cab2d1f7415b9a55f9bcdb66cdb">  113</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classMap.html#a34358cab2d1f7415b9a55f9bcdb66cdb">manual_pose_available</a>; </div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classMap.html#a2dacbc072a53ef895f2c1fb018c29b43">  115</a></span>&#160;  std::vector&lt;int&gt; <a class="code" href="classMap.html#a2dacbc072a53ef895f2c1fb018c29b43">landmark_IDs</a>;     </div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classMap.html#a2a08612e9c0b4009aacafcf7668af0b3">  116</a></span>&#160;  std::map&lt;int,Landmark*&gt; <a class="code" href="classMap.html#a2a08612e9c0b4009aacafcf7668af0b3">landmarks</a>; </div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classMap.html#aa46daeabf122cad6598cf684ee723884">  117</a></span>&#160;  std::map&lt;int,Keyframe*&gt; <a class="code" href="classMap.html#aa46daeabf122cad6598cf684ee723884">keyframes</a>; </div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classMap.html#a54b766b2b43d23be965610d9c5ca16f2">  118</a></span>&#160;  std::map&lt;int,Keyframe*&gt;::iterator <a class="code" href="classMap.html#a54b766b2b43d23be965610d9c5ca16f2">first_kf_to_adjust</a>; </div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classMap.html#a28b528d6d4769cec76f32a66251faf4c">  119</a></span>&#160;  cv::Mat <a class="code" href="classMap.html#a28b528d6d4769cec76f32a66251faf4c">descriptors</a>; </div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classMap.html#adcf461a96fe117cb8273a524b03bcd26">doPnP</a>(<span class="keyword">const</span> <a class="code" href="structFrame.html">Frame</a>&amp; current_frame, ucl_drone::Pose3D&amp; PnP_pose, <span class="keywordtype">int</span>&amp; n_inliers, <span class="keywordtype">double</span>&amp; inlier_coverage);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classMap.html#aed26fe7354f99268588ebbcdd1718ba2">  130</a></span>&#160;  cv::Mat <a class="code" href="classMap.html#aed26fe7354f99268588ebbcdd1718ba2">tvec</a>;  </div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classMap.html#a361dde7c4a9710f4d228bb32b7a596d7">  131</a></span>&#160;  cv::Mat <a class="code" href="classMap.html#a361dde7c4a9710f4d228bb32b7a596d7">rvec</a>;  </div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classMap.html#a2d773b1af5301314878d0c84482976d0">matchWithFrame</a>(<span class="keyword">const</span> <a class="code" href="structFrame.html">Frame</a>&amp; frame, std::vector&lt;cv::Point3f&gt;&amp; inliers_map_matching_points,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    std::vector&lt;cv::Point2f&gt;&amp; inliers_frame_matching_points, <span class="keywordtype">double</span>&amp; inlier_coverage);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classMap.html#add1699053ae7e04cd83c897d3791bef5">keyframeNeeded</a>(<span class="keywordtype">bool</span> manual_pose_received, <span class="keywordtype">int</span> n_inliers, <span class="keywordtype">double</span> inlier_coverage, ucl_drone::Pose3D&amp; current_pose);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#aea46eb87782d2a4809bbd0fe80916257">newKeyframe</a>(<a class="code" href="structFrame.html">Frame</a>&amp; frame);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#ade3c9580af4b73c0468947f04def9930">matchKeyframes</a>(<a class="code" href="classKeyframe.html">Keyframe</a>* kf0, <a class="code" href="classKeyframe.html">Keyframe</a>* kf1);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#a7657dddc73848fb09e09c1f4340e9618">matchKeyframeWithMap</a>(<a class="code" href="classKeyframe.html">Keyframe</a>* kf);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classMap.html#aab50e2ea33f3ea247488990047951987">getPointsForBA</a>(std::vector&lt;int&gt; &amp;kfIDs, std::map&lt;<span class="keywordtype">int</span>,std::map&lt;int,int&gt; &gt; &amp;points);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#ad516c23a920c67aecee60a52acc09c98">doBundleAdjustment</a>(std::vector&lt;int&gt; kfIDs, <span class="keywordtype">bool</span> is_global);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordtype">void</span> targetDetectedPublisher();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="classMap.html#a41fbdde09e8108430000882355fc79ad">addPoint</a>(cv::Point3d&amp; coordinates, cv::Mat&amp; descriptor);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#adea14ee9f987c9bb6d242cb5e439bbd7">removePoint</a>(<span class="keywordtype">int</span> ptID);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#a4338fe122941088dc90ed54dfb8e286d">updatePoint</a>(<span class="keywordtype">int</span> ptID, cv::Point3d new_point);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#a1e548f20958c5719c79ca45ed8a8893a">setPointAsSeen</a>(<span class="keywordtype">int</span> ptID, <span class="keywordtype">int</span> kfID, <span class="keywordtype">int</span> idx_in_kf);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#a0a4ccf9ee6358552dda552b76ab2619c">removeKeyframe</a>(<span class="keywordtype">int</span> kfID);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="classMap.html#aace3b377aebfad95cc2f3a90cd5ea42d">  217</a></span>&#160;  pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr <a class="code" href="classMap.html#aace3b377aebfad95cc2f3a90cd5ea42d">cloud</a>; </div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="classMap.html#a0f5ad0fd4563497b4214038cbca8b582">Map</a>();</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="classMap.html#a0f5ad0fd4563497b4214038cbca8b582">Map</a>(ros::NodeHandle* <a class="code" href="classMap.html#a4bf0c12711369ea6ca8da6d1f1b2ad2f">nh</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="classMap.html#aa403fbe09394ccf39747588f5168e3b2">~Map</a>();</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordtype">void</span> reset();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classMap.html#af98ac6aead03ee4b47a38b57240afd50">processFrame</a>(<a class="code" href="structFrame.html">Frame</a>&amp; frame, ucl_drone::Pose3D&amp; PnP_pose);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#ab5b44206f7045aa6cd18cfb120d15865">setManualPose</a>(<span class="keyword">const</span> ucl_drone::Pose3D&amp; <a class="code" href="classMap.html#a08c5f5b93d3b296eab01d0f0702822ae">manual_pose</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classMap.html#ad6cda6f3731694cede731fa8fa05155e">isInitialized</a>();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#aefd9f26662bca1cf8e2963def923f558">updateBundle</a>(<span class="keyword">const</span> ucl_drone::BundleMsg::ConstPtr bundlePtr);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#ad486aa15dfc0a826c69badf9a80b2954">publishBenchmarkInfo</a>(); </div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#a21406c7b75af70f36ddae1885d148302">print_benchmark_info</a>(); </div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#a8ab4414eb7329e247bd079ec1b5bdeba">print_info</a>();           </div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#a32152c9ee2de6b6a71ba58dd365079ba">print_landmarks</a>(); </div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classMap.html#ad1d96561dbffb346907123260fb0e45e">print_keyframes</a>(); </div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;};</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ucl_drone_MAP_H */</span><span class="preprocessor"></span></div><div class="ttc" id="classMap_html_afc0703cae7e706c952f45685a74d0626"><div class="ttname"><a href="classMap.html#afc0703cae7e706c952f45685a74d0626">Map::dist_thresh</a></div><div class="ttdeci">double dist_thresh</div><div class="ttdoc">Create a keyframe when farther than this from last keyframe. </div><div class="ttdef"><b>Definition:</b> map.h:101</div></div>
<div class="ttc" id="classMap_html_a688d93e7daa5dacfdcf68041fc0ce683"><div class="ttname"><a href="classMap.html#a688d93e7daa5dacfdcf68041fc0ce683">Map::threshold_lost</a></div><div class="ttdeci">static const int threshold_lost</div><div class="ttdoc">Drone is considered as lost when it has less RANSAC inliers than this. </div><div class="ttdef"><b>Definition:</b> map.h:75</div></div>
<div class="ttc" id="classMap_html_a08c5f5b93d3b296eab01d0f0702822ae"><div class="ttname"><a href="classMap.html#a08c5f5b93d3b296eab01d0f0702822ae">Map::manual_pose</a></div><div class="ttdeci">ucl_drone::Pose3D manual_pose</div><div class="ttdoc">Manual pose (received from user) if using it. </div><div class="ttdef"><b>Definition:</b> map.h:112</div></div>
<div class="ttc" id="classMap_html_a21406c7b75af70f36ddae1885d148302"><div class="ttname"><a href="classMap.html#a21406c7b75af70f36ddae1885d148302">Map::print_benchmark_info</a></div><div class="ttdeci">void print_benchmark_info()</div><div class="ttdoc">Print benchmark information to terminal. </div></div>
<div class="ttc" id="classMap_html_a4338fe122941088dc90ed54dfb8e286d"><div class="ttname"><a href="classMap.html#a4338fe122941088dc90ed54dfb8e286d">Map::updatePoint</a></div><div class="ttdeci">void updatePoint(int ptID, cv::Point3d new_point)</div><div class="ttdoc">Update the coordinates of a landmark. </div></div>
<div class="ttc" id="map__utils_8h_html"><div class="ttname"><a href="map__utils_8h.html">map_utils.h</a></div><div class="ttdoc">This header file contains various utility functions for the mapping task. </div></div>
<div class="ttc" id="classMap_html_ad1d96561dbffb346907123260fb0e45e"><div class="ttname"><a href="classMap.html#ad1d96561dbffb346907123260fb0e45e">Map::print_keyframes</a></div><div class="ttdeci">void print_keyframes()</div><div class="ttdoc">Print keyframes to terminal. </div></div>
<div class="ttc" id="classMap_html_a2472bc3b74a98eb9158ad866727ffee0"><div class="ttname"><a href="classMap.html#a2472bc3b74a98eb9158ad866727ffee0">Map::sonar_unavailable</a></div><div class="ttdeci">bool sonar_unavailable</div><div class="ttdoc">Set true for tests with the drone landed and sonar data is unavailable to use visual data instead...</div><div class="ttdef"><b>Definition:</b> map.h:91</div></div>
<div class="ttc" id="opencv__utils_8h_html"><div class="ttname"><a href="opencv__utils_8h.html">opencv_utils.h</a></div><div class="ttdoc">opencv_utils contains functions to handle frame transformation with opencv according with the Pose3D ...</div></div>
<div class="ttc" id="classMap_html_aace3b377aebfad95cc2f3a90cd5ea42d"><div class="ttname"><a href="classMap.html#aace3b377aebfad95cc2f3a90cd5ea42d">Map::cloud</a></div><div class="ttdeci">pcl::PointCloud&lt; pcl::PointXYZ &gt;::Ptr cloud</div><div class="ttdoc">Pointer to PCL pointcloud object. </div><div class="ttdef"><b>Definition:</b> map.h:217</div></div>
<div class="ttc" id="classMap_html_af98ac6aead03ee4b47a38b57240afd50"><div class="ttname"><a href="classMap.html#af98ac6aead03ee4b47a38b57240afd50">Map::processFrame</a></div><div class="ttdeci">bool processFrame(Frame &amp;frame, ucl_drone::Pose3D &amp;PnP_pose)</div><div class="ttdoc">This function is called on each new frame, it calls pnp, and the decision to create a keyframe...</div></div>
<div class="ttc" id="structCamera_html"><div class="ttname"><a href="structCamera.html">Camera</a></div><div class="ttdef"><b>Definition:</b> camera.h:19</div></div>
<div class="ttc" id="classMap_html_af5a5af988716e8be41c5129fff01d73a"><div class="ttname"><a href="classMap.html#af5a5af988716e8be41c5129fff01d73a">Map::n_inliers_moving_avg</a></div><div class="ttdeci">int n_inliers_moving_avg</div><div class="ttdoc">Average number of inliers in recent frames (far away frames have a lower weight in the average) ...</div><div class="ttdef"><b>Definition:</b> map.h:104</div></div>
<div class="ttc" id="classMap_html_aab50e2ea33f3ea247488990047951987"><div class="ttname"><a href="classMap.html#aab50e2ea33f3ea247488990047951987">Map::getPointsForBA</a></div><div class="ttdeci">int getPointsForBA(std::vector&lt; int &gt; &amp;kfIDs, std::map&lt; int, std::map&lt; int, int &gt; &gt; &amp;points)</div><div class="ttdoc">Get points to adjust for bundle adjustment. </div></div>
<div class="ttc" id="classKeyframe_html"><div class="ttname"><a href="classKeyframe.html">Keyframe</a></div><div class="ttdoc">A keyframe is a snapshot of a previous pose of the drone, with the image seen by the drone at that ti...</div><div class="ttdef"><b>Definition:</b> keyframe.h:37</div></div>
<div class="ttc" id="classMap_html_a0452c93c8870a6cb76660fb75be202fb"><div class="ttname"><a href="classMap.html#a0452c93c8870a6cb76660fb75be202fb">Map::freq_global_ba</a></div><div class="ttdeci">int freq_global_ba</div><div class="ttdoc">Frequency at which to run global bundle adjustment. </div><div class="ttdef"><b>Definition:</b> map.h:93</div></div>
<div class="ttc" id="classMap_html_ad3aacc2f037e8c13212129d34d0e161f"><div class="ttname"><a href="classMap.html#ad3aacc2f037e8c13212129d34d0e161f">Map::camera</a></div><div class="ttdeci">Camera camera</div><div class="ttdoc">Camera used during mapping. </div><div class="ttdef"><b>Definition:</b> map.h:111</div></div>
<div class="ttc" id="classMap_html_a5d91c796d77673ab8751fe0549ee36aa"><div class="ttname"><a href="classMap.html#a5d91c796d77673ab8751fe0549ee36aa">Map::BA_num_iter</a></div><div class="ttdeci">std::vector&lt; int &gt; BA_num_iter</div><div class="ttdoc">Number of iterations of bundle adjustment. </div><div class="ttdef"><b>Definition:</b> map.h:109</div></div>
<div class="ttc" id="classMap_html_ace0707010dc9f99268170b69b1a390e7"><div class="ttname"><a href="classMap.html#ace0707010dc9f99268170b69b1a390e7">Map::bundle_channel</a></div><div class="ttdeci">std::string bundle_channel</div><div class="ttdoc">Channel for bundles to be adjusted. </div><div class="ttdef"><b>Definition:</b> map.h:79</div></div>
<div class="ttc" id="camera_8h_html"><div class="ttname"><a href="camera_8h.html">camera.h</a></div><div class="ttdoc">File defining a camera object. </div></div>
<div class="ttc" id="profiling_8h_html"><div class="ttname"><a href="profiling_8h.html">profiling.h</a></div><div class="ttdoc">Common definition for PROFILING MACRO. </div></div>
<div class="ttc" id="classMap_html_a8ab4414eb7329e247bd079ec1b5bdeba"><div class="ttname"><a href="classMap.html#a8ab4414eb7329e247bd079ec1b5bdeba">Map::print_info</a></div><div class="ttdeci">void print_info()</div><div class="ttdoc">Print information of the map to terminal. </div></div>
<div class="ttc" id="classMap_html_a45d93dc7966ef968d3730754526549ea"><div class="ttname"><a href="classMap.html#a45d93dc7966ef968d3730754526549ea">Map::min_dist</a></div><div class="ttdeci">double min_dist</div><div class="ttdoc">Minimal distance to last keyframe to create a new one. </div><div class="ttdef"><b>Definition:</b> map.h:96</div></div>
<div class="ttc" id="classMap_html_a7183a0cc5d16367c2248eb7db0e6839a"><div class="ttname"><a href="classMap.html#a7183a0cc5d16367c2248eb7db0e6839a">Map::BA_times</a></div><div class="ttdeci">std::vector&lt; double &gt; BA_times</div><div class="ttdoc">Times taken by bundle adjustment. </div><div class="ttdef"><b>Definition:</b> map.h:108</div></div>
<div class="ttc" id="classMap_html_aa7020f7c1d53310e0d8c6b616038fc0e"><div class="ttname"><a href="classMap.html#aa7020f7c1d53310e0d8c6b616038fc0e">Map::manual_keyframes</a></div><div class="ttdeci">bool manual_keyframes</div><div class="ttdoc">If true, keyframe decision is not made automatically, but when the user sends a message. </div><div class="ttdef"><b>Definition:</b> map.h:90</div></div>
<div class="ttc" id="classMap_html_aefd9f26662bca1cf8e2963def923f558"><div class="ttname"><a href="classMap.html#aefd9f26662bca1cf8e2963def923f558">Map::updateBundle</a></div><div class="ttdeci">void updateBundle(const ucl_drone::BundleMsg::ConstPtr bundlePtr)</div><div class="ttdoc">Update a bundle Update keyframes and landmarks that were adjusted by the bundle adjustment node...</div></div>
<div class="ttc" id="structFrame_html"><div class="ttname"><a href="structFrame.html">Frame</a></div><div class="ttdoc">A Frame object stores ImageProcessed message. </div><div class="ttdef"><b>Definition:</b> frame.h:45</div></div>
<div class="ttc" id="classMap_html_a35fc2ab0486f0f82512c0eb6bf4b1ccd"><div class="ttname"><a href="classMap.html#a35fc2ab0486f0f82512c0eb6bf4b1ccd">Map::FOV_thresh</a></div><div class="ttdeci">double FOV_thresh</div><div class="ttdoc">Create a keyframe when more than this fraction of the screen has no keypoints (from any side) ...</div><div class="ttdef"><b>Definition:</b> map.h:99</div></div>
<div class="ttc" id="keyframe_8h_html"><div class="ttname"><a href="keyframe_8h.html">keyframe.h</a></div><div class="ttdoc">This header file contains Keyframe class definition. </div></div>
<div class="ttc" id="classMap_html_abef231667d94cca21fe6afd15f6b7cc0"><div class="ttname"><a href="classMap.html#abef231667d94cca21fe6afd15f6b7cc0">Map::only_init</a></div><div class="ttdeci">bool only_init</div><div class="ttdoc">If true, no keyframes are created after initialization. </div><div class="ttdef"><b>Definition:</b> map.h:88</div></div>
<div class="ttc" id="classMap_html_ab5b44206f7045aa6cd18cfb120d15865"><div class="ttname"><a href="classMap.html#ab5b44206f7045aa6cd18cfb120d15865">Map::setManualPose</a></div><div class="ttdeci">void setManualPose(const ucl_drone::Pose3D &amp;manual_pose)</div><div class="ttdoc">Set manual pose to manual_pose. </div></div>
<div class="ttc" id="classMap_html_adcf461a96fe117cb8273a524b03bcd26"><div class="ttname"><a href="classMap.html#adcf461a96fe117cb8273a524b03bcd26">Map::doPnP</a></div><div class="ttdeci">int doPnP(const Frame &amp;current_frame, ucl_drone::Pose3D &amp;PnP_pose, int &amp;n_inliers, double &amp;inlier_coverage)</div><div class="ttdoc">This method computes the PnP estimation. </div></div>
<div class="ttc" id="projection__2D_8h_html"><div class="ttname"><a href="projection__2D_8h.html">projection_2D.h</a></div><div class="ttdoc">Workspace transformation from the image coordinates to the world coordinates Simple ground projection...</div></div>
<div class="ttc" id="classMap_html_aa403fbe09394ccf39747588f5168e3b2"><div class="ttname"><a href="classMap.html#aa403fbe09394ccf39747588f5168e3b2">Map::~Map</a></div><div class="ttdeci">~Map()</div><div class="ttdoc">Destructor. </div></div>
<div class="ttc" id="classMap_html_add1699053ae7e04cd83c897d3791bef5"><div class="ttname"><a href="classMap.html#add1699053ae7e04cd83c897d3791bef5">Map::keyframeNeeded</a></div><div class="ttdeci">bool keyframeNeeded(bool manual_pose_received, int n_inliers, double inlier_coverage, ucl_drone::Pose3D &amp;current_pose)</div><div class="ttdoc">Decide whether a new keyframe is needed. </div></div>
<div class="ttc" id="classMap_html_a28b528d6d4769cec76f32a66251faf4c"><div class="ttname"><a href="classMap.html#a28b528d6d4769cec76f32a66251faf4c">Map::descriptors</a></div><div class="ttdeci">cv::Mat descriptors</div><div class="ttdoc">descriptors of landmarks </div><div class="ttdef"><b>Definition:</b> map.h:119</div></div>
<div class="ttc" id="classMap_html_ad6cda6f3731694cede731fa8fa05155e"><div class="ttname"><a href="classMap.html#ad6cda6f3731694cede731fa8fa05155e">Map::isInitialized</a></div><div class="ttdeci">bool isInitialized()</div><div class="ttdoc">Check whether map is isInitialized. </div></div>
<div class="ttc" id="classMap_html_af5695f2e241107aa812cc5c1826fef37"><div class="ttname"><a href="classMap.html#af5695f2e241107aa812cc5c1826fef37">Map::inliers_thresh</a></div><div class="ttdeci">double inliers_thresh</div><div class="ttdoc">Create a keyframe when less than this amount of RANSAC inliers. </div><div class="ttdef"><b>Definition:</b> map.h:98</div></div>
<div class="ttc" id="read__from__launch_8h_html"><div class="ttname"><a href="read__from__launch_8h.html">read_from_launch.h</a></div><div class="ttdoc">This header file defines a class to read some parameters in the launch file like the camera calibrati...</div></div>
<div class="ttc" id="classMap_html_a2dacbc072a53ef895f2c1fb018c29b43"><div class="ttname"><a href="classMap.html#a2dacbc072a53ef895f2c1fb018c29b43">Map::landmark_IDs</a></div><div class="ttdeci">std::vector&lt; int &gt; landmark_IDs</div><div class="ttdoc">Vector of IDs for each landmark in the map. </div><div class="ttdef"><b>Definition:</b> map.h:115</div></div>
<div class="ttc" id="classMap_html_a1e548f20958c5719c79ca45ed8a8893a"><div class="ttname"><a href="classMap.html#a1e548f20958c5719c79ca45ed8a8893a">Map::setPointAsSeen</a></div><div class="ttdeci">void setPointAsSeen(int ptID, int kfID, int idx_in_kf)</div><div class="ttdoc">Seta point as seen by a keyframe. </div></div>
<div class="ttc" id="classMap_html_ad516c23a920c67aecee60a52acc09c98"><div class="ttname"><a href="classMap.html#ad516c23a920c67aecee60a52acc09c98">Map::doBundleAdjustment</a></div><div class="ttdeci">void doBundleAdjustment(std::vector&lt; int &gt; kfIDs, bool is_global)</div><div class="ttdoc">Prepare a bundle message and send it (to the bundle adjustment node) </div></div>
<div class="ttc" id="frame_8h_html"><div class="ttname"><a href="frame_8h.html">frame.h</a></div><div class="ttdoc">Header file wich defines the Frame class. </div></div>
<div class="ttc" id="ucl__drone_8h_html"><div class="ttname"><a href="ucl__drone_8h.html">ucl_drone.h</a></div><div class="ttdoc">Macros for strategy and path planning. </div></div>
<div class="ttc" id="classMap_html_a2a08612e9c0b4009aacafcf7668af0b3"><div class="ttname"><a href="classMap.html#a2a08612e9c0b4009aacafcf7668af0b3">Map::landmarks</a></div><div class="ttdeci">std::map&lt; int, Landmark * &gt; landmarks</div><div class="ttdoc">Map of landmark IDs to landmarks. </div><div class="ttdef"><b>Definition:</b> map.h:116</div></div>
<div class="ttc" id="classMap_html_a89c73a3c3de88c3656ded53b7ff28c4f"><div class="ttname"><a href="classMap.html#a89c73a3c3de88c3656ded53b7ff28c4f">Map::benchmark_channel</a></div><div class="ttdeci">std::string benchmark_channel</div><div class="ttdoc">Channel for benchamrk information. </div><div class="ttdef"><b>Definition:</b> map.h:81</div></div>
<div class="ttc" id="classMap_html_a0a4ccf9ee6358552dda552b76ab2619c"><div class="ttname"><a href="classMap.html#a0a4ccf9ee6358552dda552b76ab2619c">Map::removeKeyframe</a></div><div class="ttdeci">void removeKeyframe(int kfID)</div><div class="ttdoc">Remove a keyframe from the map. </div></div>
<div class="ttc" id="classMap_html_a7657dddc73848fb09e09c1f4340e9618"><div class="ttname"><a href="classMap.html#a7657dddc73848fb09e09c1f4340e9618">Map::matchKeyframeWithMap</a></div><div class="ttdeci">void matchKeyframeWithMap(Keyframe *kf)</div><div class="ttdoc">Match a keyframe with the map and update the keyframe to reflect new observations. </div></div>
<div class="ttc" id="classMap_html_a34358cab2d1f7415b9a55f9bcdb66cdb"><div class="ttname"><a href="classMap.html#a34358cab2d1f7415b9a55f9bcdb66cdb">Map::manual_pose_available</a></div><div class="ttdeci">bool manual_pose_available</div><div class="ttdoc">true when a manual pose is available </div><div class="ttdef"><b>Definition:</b> map.h:113</div></div>
<div class="ttc" id="classMap_html_a42aaec155f0d5f18aeda45a0bebb5d71"><div class="ttname"><a href="classMap.html#a42aaec155f0d5f18aeda45a0bebb5d71">Map::is_adjusting_bundle</a></div><div class="ttdeci">bool is_adjusting_bundle</div><div class="ttdoc">True while bundle adjustment is running. </div><div class="ttdef"><b>Definition:</b> map.h:103</div></div>
<div class="ttc" id="classMap_html_a361dde7c4a9710f4d228bb32b7a596d7"><div class="ttname"><a href="classMap.html#a361dde7c4a9710f4d228bb32b7a596d7">Map::rvec</a></div><div class="ttdeci">cv::Mat rvec</div><div class="ttdoc">last rotational vector (PnP estimation) </div><div class="ttdef"><b>Definition:</b> map.h:131</div></div>
<div class="ttc" id="classMap_html_adea14ee9f987c9bb6d242cb5e439bbd7"><div class="ttname"><a href="classMap.html#adea14ee9f987c9bb6d242cb5e439bbd7">Map::removePoint</a></div><div class="ttdeci">void removePoint(int ptID)</div><div class="ttdoc">Remove a landmark from the map. </div></div>
<div class="ttc" id="classMap_html_aa46daeabf122cad6598cf684ee723884"><div class="ttname"><a href="classMap.html#aa46daeabf122cad6598cf684ee723884">Map::keyframes</a></div><div class="ttdeci">std::map&lt; int, Keyframe * &gt; keyframes</div><div class="ttdoc">Map of keyframe IDs to keyframes. </div><div class="ttdef"><b>Definition:</b> map.h:117</div></div>
<div class="ttc" id="classMap_html_a32152c9ee2de6b6a71ba58dd365079ba"><div class="ttname"><a href="classMap.html#a32152c9ee2de6b6a71ba58dd365079ba">Map::print_landmarks</a></div><div class="ttdeci">void print_landmarks()</div><div class="ttdoc">Print landmarks to terminal. </div></div>
<div class="ttc" id="classMap_html_a794eea744a2ea7532fd6cf99a015410d"><div class="ttname"><a href="classMap.html#a794eea744a2ea7532fd6cf99a015410d">Map::n_kf_local_ba</a></div><div class="ttdeci">int n_kf_local_ba</div><div class="ttdoc">Number of keyframes to adjust when running local bundle adjustment. </div><div class="ttdef"><b>Definition:</b> map.h:92</div></div>
<div class="ttc" id="classMap_html"><div class="ttname"><a href="classMap.html">Map</a></div><div class="ttdef"><b>Definition:</b> map.h:71</div></div>
<div class="ttc" id="classMap_html_a080c23dee123aa9c5ddabb012a43ea55"><div class="ttname"><a href="classMap.html#a080c23dee123aa9c5ddabb012a43ea55">Map::min_time</a></div><div class="ttdeci">double min_time</div><div class="ttdoc">Minimal time between keyframes. </div><div class="ttdef"><b>Definition:</b> map.h:97</div></div>
<div class="ttc" id="classMap_html_a96dea5fd8286b76a01685e97c0972002"><div class="ttname"><a href="classMap.html#a96dea5fd8286b76a01685e97c0972002">Map::benchmark_pub</a></div><div class="ttdeci">ros::Publisher benchmark_pub</div><div class="ttdoc">Publisher of benchamrk information. </div><div class="ttdef"><b>Definition:</b> map.h:82</div></div>
<div class="ttc" id="classMap_html_a8a3acc93b77883137eba917691492674"><div class="ttname"><a href="classMap.html#a8a3acc93b77883137eba917691492674">Map::no_bundle_adjustment</a></div><div class="ttdeci">bool no_bundle_adjustment</div><div class="ttdoc">If true, bundle adjustment is never performed. </div><div class="ttdef"><b>Definition:</b> map.h:87</div></div>
<div class="ttc" id="classMap_html_a57996d0d3379ead3e4e7877db836ef33"><div class="ttname"><a href="classMap.html#a57996d0d3379ead3e4e7877db836ef33">Map::time_thresh</a></div><div class="ttdeci">double time_thresh</div><div class="ttdoc">Create a keyframe when more time than this has elapsed since last one. </div><div class="ttdef"><b>Definition:</b> map.h:100</div></div>
<div class="ttc" id="classMap_html_a54b766b2b43d23be965610d9c5ca16f2"><div class="ttname"><a href="classMap.html#a54b766b2b43d23be965610d9c5ca16f2">Map::first_kf_to_adjust</a></div><div class="ttdeci">std::map&lt; int, Keyframe * &gt;::iterator first_kf_to_adjust</div><div class="ttdoc">Iterator to oldest keyframe to include in local bundle adjsutment. </div><div class="ttdef"><b>Definition:</b> map.h:118</div></div>
<div class="ttc" id="landmark_8h_html"><div class="ttname"><a href="landmark_8h.html">landmark.h</a></div><div class="ttdoc">This header file contains Landmark class definition. </div></div>
<div class="ttc" id="classMap_html_a8c2c3f9134ec1c77288b6147c4249897"><div class="ttname"><a href="classMap.html#a8c2c3f9134ec1c77288b6147c4249897">Map::thresh_descriptor_match</a></div><div class="ttdeci">double thresh_descriptor_match</div><div class="ttdoc">Threshold for matches between descriptors. </div><div class="ttdef"><b>Definition:</b> map.h:85</div></div>
<div class="ttc" id="classMap_html_ad486aa15dfc0a826c69badf9a80b2954"><div class="ttname"><a href="classMap.html#ad486aa15dfc0a826c69badf9a80b2954">Map::publishBenchmarkInfo</a></div><div class="ttdeci">void publishBenchmarkInfo()</div><div class="ttdoc">Publish information for benchamrking. </div></div>
<div class="ttc" id="classMap_html_ade3c9580af4b73c0468947f04def9930"><div class="ttname"><a href="classMap.html#ade3c9580af4b73c0468947f04def9930">Map::matchKeyframes</a></div><div class="ttdeci">void matchKeyframes(Keyframe *kf0, Keyframe *kf1)</div><div class="ttdoc">Match two keyframes and add any new matches to the map. </div></div>
<div class="ttc" id="classMap_html_a0f5ad0fd4563497b4214038cbca8b582"><div class="ttname"><a href="classMap.html#a0f5ad0fd4563497b4214038cbca8b582">Map::Map</a></div><div class="ttdeci">Map()</div><div class="ttdoc">Contructors. Initialize an empty map. </div></div>
<div class="ttc" id="classMap_html_aea46eb87782d2a4809bbd0fe80916257"><div class="ttname"><a href="classMap.html#aea46eb87782d2a4809bbd0fe80916257">Map::newKeyframe</a></div><div class="ttdeci">void newKeyframe(Frame &amp;frame)</div><div class="ttdoc">Make a new keyframe from a frame. </div></div>
<div class="ttc" id="classMap_html_ac931ea7b0cb5591952779c5e5ab6192e"><div class="ttname"><a href="classMap.html#ac931ea7b0cb5591952779c5e5ab6192e">Map::outlier_threshold</a></div><div class="ttdeci">double outlier_threshold</div><div class="ttdoc">Threshold on contribution to bundle adjustment objective for a point to be considered an outlier...</div><div class="ttdef"><b>Definition:</b> map.h:89</div></div>
<div class="ttc" id="classMap_html_a41fbdde09e8108430000882355fc79ad"><div class="ttname"><a href="classMap.html#a41fbdde09e8108430000882355fc79ad">Map::addPoint</a></div><div class="ttdeci">int addPoint(cv::Point3d &amp;coordinates, cv::Mat &amp;descriptor)</div><div class="ttdoc">Add a landmark to the map. </div></div>
<div class="ttc" id="classMap_html_aa0395513a7ef43438f5ee965e3b9f2dd"><div class="ttname"><a href="classMap.html#aa0395513a7ef43438f5ee965e3b9f2dd">Map::last_new_keyframe</a></div><div class="ttdeci">ros::Time last_new_keyframe</div><div class="ttdoc">Time when a keyframe was last added. </div><div class="ttdef"><b>Definition:</b> map.h:105</div></div>
<div class="ttc" id="classMap_html_a575ed053aec5a34555ee9642b95765eb"><div class="ttname"><a href="classMap.html#a575ed053aec5a34555ee9642b95765eb">Map::max_matches</a></div><div class="ttdeci">int max_matches</div><div class="ttdoc">Max number of matches when matching sets of descriptors. </div><div class="ttdef"><b>Definition:</b> map.h:86</div></div>
<div class="ttc" id="classMap_html_a4bf0c12711369ea6ca8da6d1f1b2ad2f"><div class="ttname"><a href="classMap.html#a4bf0c12711369ea6ca8da6d1f1b2ad2f">Map::nh</a></div><div class="ttdeci">ros::NodeHandle * nh</div><div class="ttdoc">pointer to ROS node handle of MappingNode </div><div class="ttdef"><b>Definition:</b> map.h:78</div></div>
<div class="ttc" id="classMap_html_a19f0dddf99a284cffef5c1119bc4dde4"><div class="ttname"><a href="classMap.html#a19f0dddf99a284cffef5c1119bc4dde4">Map::bundle_pub</a></div><div class="ttdeci">ros::Publisher bundle_pub</div><div class="ttdoc">Publisher for bundles to be adjusted. </div><div class="ttdef"><b>Definition:</b> map.h:80</div></div>
<div class="ttc" id="classMap_html_a2d773b1af5301314878d0c84482976d0"><div class="ttname"><a href="classMap.html#a2d773b1af5301314878d0c84482976d0">Map::matchWithFrame</a></div><div class="ttdeci">int matchWithFrame(const Frame &amp;frame, std::vector&lt; cv::Point3f &gt; &amp;inliers_map_matching_points, std::vector&lt; cv::Point2f &gt; &amp;inliers_frame_matching_points, double &amp;inlier_coverage)</div><div class="ttdoc">Match a frame with the map. </div></div>
<div class="ttc" id="classMap_html_aed26fe7354f99268588ebbcdd1718ba2"><div class="ttname"><a href="classMap.html#aed26fe7354f99268588ebbcdd1718ba2">Map::tvec</a></div><div class="ttdeci">cv::Mat tvec</div><div class="ttdoc">last translation vector (PnP estimation) </div><div class="ttdef"><b>Definition:</b> map.h:130</div></div>
<div class="ttc" id="classMap_html_ac029a5c3bdc1a95c39519a30c2435670"><div class="ttname"><a href="classMap.html#ac029a5c3bdc1a95c39519a30c2435670">Map::kf_since_last_global_BA</a></div><div class="ttdeci">int kf_since_last_global_BA</div><div class="ttdoc">Number of keyframes created since last time global bundle adjustment was run. </div><div class="ttdef"><b>Definition:</b> map.h:106</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
