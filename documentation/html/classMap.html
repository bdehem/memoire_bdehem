<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ucl_drone: Map Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ucl_drone
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classMap-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Map Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="map_8h_source.html">map.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0f5ad0fd4563497b4214038cbca8b582"><td class="memItemLeft" align="right" valign="top"><a id="a0f5ad0fd4563497b4214038cbca8b582"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a0f5ad0fd4563497b4214038cbca8b582">Map</a> ()</td></tr>
<tr class="memdesc:a0f5ad0fd4563497b4214038cbca8b582"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contructors. Initialize an empty map. <br /></td></tr>
<tr class="separator:a0f5ad0fd4563497b4214038cbca8b582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1812fd08e41c2afa080a6b2691876d6"><td class="memItemLeft" align="right" valign="top"><a id="af1812fd08e41c2afa080a6b2691876d6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Map</b> (ros::NodeHandle *<a class="el" href="classMap.html#a4bf0c12711369ea6ca8da6d1f1b2ad2f">nh</a>)</td></tr>
<tr class="separator:af1812fd08e41c2afa080a6b2691876d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa403fbe09394ccf39747588f5168e3b2"><td class="memItemLeft" align="right" valign="top"><a id="aa403fbe09394ccf39747588f5168e3b2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aa403fbe09394ccf39747588f5168e3b2">~Map</a> ()</td></tr>
<tr class="memdesc:aa403fbe09394ccf39747588f5168e3b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:aa403fbe09394ccf39747588f5168e3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a904c445fdce79257fedeba09070cf88a"><td class="memItemLeft" align="right" valign="top"><a id="a904c445fdce79257fedeba09070cf88a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>reset</b> ()</td></tr>
<tr class="separator:a904c445fdce79257fedeba09070cf88a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af98ac6aead03ee4b47a38b57240afd50"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#af98ac6aead03ee4b47a38b57240afd50">processFrame</a> (<a class="el" href="structFrame.html">Frame</a> &amp;frame, ucl_drone::Pose3D &amp;PnP_pose)</td></tr>
<tr class="memdesc:af98ac6aead03ee4b47a38b57240afd50"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called on each new frame, it calls pnp, and the decision to create a keyframe.  <a href="#af98ac6aead03ee4b47a38b57240afd50">More...</a><br /></td></tr>
<tr class="separator:af98ac6aead03ee4b47a38b57240afd50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b44206f7045aa6cd18cfb120d15865"><td class="memItemLeft" align="right" valign="top"><a id="ab5b44206f7045aa6cd18cfb120d15865"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ab5b44206f7045aa6cd18cfb120d15865">setManualPose</a> (const ucl_drone::Pose3D &amp;<a class="el" href="classMap.html#a08c5f5b93d3b296eab01d0f0702822ae">manual_pose</a>)</td></tr>
<tr class="memdesc:ab5b44206f7045aa6cd18cfb120d15865"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set manual pose to manual_pose. <br /></td></tr>
<tr class="separator:ab5b44206f7045aa6cd18cfb120d15865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6cda6f3731694cede731fa8fa05155e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ad6cda6f3731694cede731fa8fa05155e">isInitialized</a> ()</td></tr>
<tr class="memdesc:ad6cda6f3731694cede731fa8fa05155e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether map is isInitialized.  <a href="#ad6cda6f3731694cede731fa8fa05155e">More...</a><br /></td></tr>
<tr class="separator:ad6cda6f3731694cede731fa8fa05155e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefd9f26662bca1cf8e2963def923f558"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aefd9f26662bca1cf8e2963def923f558">updateBundle</a> (const ucl_drone::BundleMsg::ConstPtr bundlePtr)</td></tr>
<tr class="memdesc:aefd9f26662bca1cf8e2963def923f558"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update a bundle Update keyframes and landmarks that were adjusted by the bundle adjustment node.  <a href="#aefd9f26662bca1cf8e2963def923f558">More...</a><br /></td></tr>
<tr class="separator:aefd9f26662bca1cf8e2963def923f558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad486aa15dfc0a826c69badf9a80b2954"><td class="memItemLeft" align="right" valign="top"><a id="ad486aa15dfc0a826c69badf9a80b2954"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ad486aa15dfc0a826c69badf9a80b2954">publishBenchmarkInfo</a> ()</td></tr>
<tr class="memdesc:ad486aa15dfc0a826c69badf9a80b2954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish information for benchamrking. <br /></td></tr>
<tr class="separator:ad486aa15dfc0a826c69badf9a80b2954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21406c7b75af70f36ddae1885d148302"><td class="memItemLeft" align="right" valign="top"><a id="a21406c7b75af70f36ddae1885d148302"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a21406c7b75af70f36ddae1885d148302">print_benchmark_info</a> ()</td></tr>
<tr class="memdesc:a21406c7b75af70f36ddae1885d148302"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print benchmark information to terminal. <br /></td></tr>
<tr class="separator:a21406c7b75af70f36ddae1885d148302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ab4414eb7329e247bd079ec1b5bdeba"><td class="memItemLeft" align="right" valign="top"><a id="a8ab4414eb7329e247bd079ec1b5bdeba"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a8ab4414eb7329e247bd079ec1b5bdeba">print_info</a> ()</td></tr>
<tr class="memdesc:a8ab4414eb7329e247bd079ec1b5bdeba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print information of the map to terminal. <br /></td></tr>
<tr class="separator:a8ab4414eb7329e247bd079ec1b5bdeba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32152c9ee2de6b6a71ba58dd365079ba"><td class="memItemLeft" align="right" valign="top"><a id="a32152c9ee2de6b6a71ba58dd365079ba"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a32152c9ee2de6b6a71ba58dd365079ba">print_landmarks</a> ()</td></tr>
<tr class="memdesc:a32152c9ee2de6b6a71ba58dd365079ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print landmarks to terminal. <br /></td></tr>
<tr class="separator:a32152c9ee2de6b6a71ba58dd365079ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d96561dbffb346907123260fb0e45e"><td class="memItemLeft" align="right" valign="top"><a id="ad1d96561dbffb346907123260fb0e45e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ad1d96561dbffb346907123260fb0e45e">print_keyframes</a> ()</td></tr>
<tr class="memdesc:ad1d96561dbffb346907123260fb0e45e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print keyframes to terminal. <br /></td></tr>
<tr class="separator:ad1d96561dbffb346907123260fb0e45e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aace3b377aebfad95cc2f3a90cd5ea42d"><td class="memItemLeft" align="right" valign="top"><a id="aace3b377aebfad95cc2f3a90cd5ea42d"></a>
pcl::PointCloud&lt; pcl::PointXYZ &gt;::Ptr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aace3b377aebfad95cc2f3a90cd5ea42d">cloud</a></td></tr>
<tr class="memdesc:aace3b377aebfad95cc2f3a90cd5ea42d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to PCL pointcloud object. <br /></td></tr>
<tr class="separator:aace3b377aebfad95cc2f3a90cd5ea42d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:adcf461a96fe117cb8273a524b03bcd26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#adcf461a96fe117cb8273a524b03bcd26">doPnP</a> (const <a class="el" href="structFrame.html">Frame</a> &amp;current_frame, ucl_drone::Pose3D &amp;PnP_pose, int &amp;n_inliers, double &amp;inlier_coverage)</td></tr>
<tr class="memdesc:adcf461a96fe117cb8273a524b03bcd26"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method computes the PnP estimation.  <a href="#adcf461a96fe117cb8273a524b03bcd26">More...</a><br /></td></tr>
<tr class="separator:adcf461a96fe117cb8273a524b03bcd26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d773b1af5301314878d0c84482976d0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a2d773b1af5301314878d0c84482976d0">matchWithFrame</a> (const <a class="el" href="structFrame.html">Frame</a> &amp;frame, std::vector&lt; cv::Point3f &gt; &amp;inliers_map_matching_points, std::vector&lt; cv::Point2f &gt; &amp;inliers_frame_matching_points, double &amp;inlier_coverage)</td></tr>
<tr class="memdesc:a2d773b1af5301314878d0c84482976d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Match a frame with the map.  <a href="#a2d773b1af5301314878d0c84482976d0">More...</a><br /></td></tr>
<tr class="separator:a2d773b1af5301314878d0c84482976d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add1699053ae7e04cd83c897d3791bef5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#add1699053ae7e04cd83c897d3791bef5">keyframeNeeded</a> (bool manual_pose_received, int n_inliers, double inlier_coverage, ucl_drone::Pose3D &amp;current_pose)</td></tr>
<tr class="memdesc:add1699053ae7e04cd83c897d3791bef5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decide whether a new keyframe is needed.  <a href="#add1699053ae7e04cd83c897d3791bef5">More...</a><br /></td></tr>
<tr class="separator:add1699053ae7e04cd83c897d3791bef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea46eb87782d2a4809bbd0fe80916257"><td class="memItemLeft" align="right" valign="top"><a id="aea46eb87782d2a4809bbd0fe80916257"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aea46eb87782d2a4809bbd0fe80916257">newKeyframe</a> (<a class="el" href="structFrame.html">Frame</a> &amp;frame)</td></tr>
<tr class="memdesc:aea46eb87782d2a4809bbd0fe80916257"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a new keyframe from a frame. <br /></td></tr>
<tr class="separator:aea46eb87782d2a4809bbd0fe80916257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade3c9580af4b73c0468947f04def9930"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ade3c9580af4b73c0468947f04def9930">matchKeyframes</a> (<a class="el" href="classKeyframe.html">Keyframe</a> *kf0, <a class="el" href="classKeyframe.html">Keyframe</a> *kf1)</td></tr>
<tr class="memdesc:ade3c9580af4b73c0468947f04def9930"><td class="mdescLeft">&#160;</td><td class="mdescRight">Match two keyframes and add any new matches to the map.  <a href="#ade3c9580af4b73c0468947f04def9930">More...</a><br /></td></tr>
<tr class="separator:ade3c9580af4b73c0468947f04def9930"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7657dddc73848fb09e09c1f4340e9618"><td class="memItemLeft" align="right" valign="top"><a id="a7657dddc73848fb09e09c1f4340e9618"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a7657dddc73848fb09e09c1f4340e9618">matchKeyframeWithMap</a> (<a class="el" href="classKeyframe.html">Keyframe</a> *kf)</td></tr>
<tr class="memdesc:a7657dddc73848fb09e09c1f4340e9618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Match a keyframe with the map and update the keyframe to reflect new observations. <br /></td></tr>
<tr class="separator:a7657dddc73848fb09e09c1f4340e9618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab50e2ea33f3ea247488990047951987"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aab50e2ea33f3ea247488990047951987">getPointsForBA</a> (std::vector&lt; int &gt; &amp;kfIDs, std::map&lt; int, std::map&lt; int, int &gt; &gt; &amp;points)</td></tr>
<tr class="memdesc:aab50e2ea33f3ea247488990047951987"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get points to adjust for bundle adjustment.  <a href="#aab50e2ea33f3ea247488990047951987">More...</a><br /></td></tr>
<tr class="separator:aab50e2ea33f3ea247488990047951987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad516c23a920c67aecee60a52acc09c98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ad516c23a920c67aecee60a52acc09c98">doBundleAdjustment</a> (std::vector&lt; int &gt; kfIDs, bool is_global)</td></tr>
<tr class="memdesc:ad516c23a920c67aecee60a52acc09c98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare a bundle message and send it (to the bundle adjustment node)  <a href="#ad516c23a920c67aecee60a52acc09c98">More...</a><br /></td></tr>
<tr class="separator:ad516c23a920c67aecee60a52acc09c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32f9567481df1e6960610a83b7f0064b"><td class="memItemLeft" align="right" valign="top"><a id="a32f9567481df1e6960610a83b7f0064b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>targetDetectedPublisher</b> ()</td></tr>
<tr class="separator:a32f9567481df1e6960610a83b7f0064b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41fbdde09e8108430000882355fc79ad"><td class="memItemLeft" align="right" valign="top"><a id="a41fbdde09e8108430000882355fc79ad"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a41fbdde09e8108430000882355fc79ad">addPoint</a> (cv::Point3d &amp;coordinates, cv::Mat &amp;descriptor)</td></tr>
<tr class="memdesc:a41fbdde09e8108430000882355fc79ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a landmark to the map. <br /></td></tr>
<tr class="separator:a41fbdde09e8108430000882355fc79ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea14ee9f987c9bb6d242cb5e439bbd7"><td class="memItemLeft" align="right" valign="top"><a id="adea14ee9f987c9bb6d242cb5e439bbd7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#adea14ee9f987c9bb6d242cb5e439bbd7">removePoint</a> (int ptID)</td></tr>
<tr class="memdesc:adea14ee9f987c9bb6d242cb5e439bbd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a landmark from the map. <br /></td></tr>
<tr class="separator:adea14ee9f987c9bb6d242cb5e439bbd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4338fe122941088dc90ed54dfb8e286d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a4338fe122941088dc90ed54dfb8e286d">updatePoint</a> (int ptID, cv::Point3d new_point)</td></tr>
<tr class="memdesc:a4338fe122941088dc90ed54dfb8e286d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the coordinates of a landmark.  <a href="#a4338fe122941088dc90ed54dfb8e286d">More...</a><br /></td></tr>
<tr class="separator:a4338fe122941088dc90ed54dfb8e286d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e548f20958c5719c79ca45ed8a8893a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a1e548f20958c5719c79ca45ed8a8893a">setPointAsSeen</a> (int ptID, int kfID, int idx_in_kf)</td></tr>
<tr class="memdesc:a1e548f20958c5719c79ca45ed8a8893a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seta point as seen by a keyframe.  <a href="#a1e548f20958c5719c79ca45ed8a8893a">More...</a><br /></td></tr>
<tr class="separator:a1e548f20958c5719c79ca45ed8a8893a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4ccf9ee6358552dda552b76ab2619c"><td class="memItemLeft" align="right" valign="top"><a id="a0a4ccf9ee6358552dda552b76ab2619c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a0a4ccf9ee6358552dda552b76ab2619c">removeKeyframe</a> (int kfID)</td></tr>
<tr class="memdesc:a0a4ccf9ee6358552dda552b76ab2619c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a keyframe from the map. <br /></td></tr>
<tr class="separator:a0a4ccf9ee6358552dda552b76ab2619c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4bf0c12711369ea6ca8da6d1f1b2ad2f"><td class="memItemLeft" align="right" valign="top"><a id="a4bf0c12711369ea6ca8da6d1f1b2ad2f"></a>
ros::NodeHandle *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a4bf0c12711369ea6ca8da6d1f1b2ad2f">nh</a></td></tr>
<tr class="memdesc:a4bf0c12711369ea6ca8da6d1f1b2ad2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to ROS node handle of <a class="el" href="classMappingNode.html">MappingNode</a> <br /></td></tr>
<tr class="separator:a4bf0c12711369ea6ca8da6d1f1b2ad2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0707010dc9f99268170b69b1a390e7"><td class="memItemLeft" align="right" valign="top"><a id="ace0707010dc9f99268170b69b1a390e7"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ace0707010dc9f99268170b69b1a390e7">bundle_channel</a></td></tr>
<tr class="memdesc:ace0707010dc9f99268170b69b1a390e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Channel for bundles to be adjusted. <br /></td></tr>
<tr class="separator:ace0707010dc9f99268170b69b1a390e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19f0dddf99a284cffef5c1119bc4dde4"><td class="memItemLeft" align="right" valign="top"><a id="a19f0dddf99a284cffef5c1119bc4dde4"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a19f0dddf99a284cffef5c1119bc4dde4">bundle_pub</a></td></tr>
<tr class="memdesc:a19f0dddf99a284cffef5c1119bc4dde4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publisher for bundles to be adjusted. <br /></td></tr>
<tr class="separator:a19f0dddf99a284cffef5c1119bc4dde4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89c73a3c3de88c3656ded53b7ff28c4f"><td class="memItemLeft" align="right" valign="top"><a id="a89c73a3c3de88c3656ded53b7ff28c4f"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a89c73a3c3de88c3656ded53b7ff28c4f">benchmark_channel</a></td></tr>
<tr class="memdesc:a89c73a3c3de88c3656ded53b7ff28c4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Channel for benchamrk information. <br /></td></tr>
<tr class="separator:a89c73a3c3de88c3656ded53b7ff28c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96dea5fd8286b76a01685e97c0972002"><td class="memItemLeft" align="right" valign="top"><a id="a96dea5fd8286b76a01685e97c0972002"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a96dea5fd8286b76a01685e97c0972002">benchmark_pub</a></td></tr>
<tr class="memdesc:a96dea5fd8286b76a01685e97c0972002"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publisher of benchamrk information. <br /></td></tr>
<tr class="separator:a96dea5fd8286b76a01685e97c0972002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2c3f9134ec1c77288b6147c4249897"><td class="memItemLeft" align="right" valign="top"><a id="a8c2c3f9134ec1c77288b6147c4249897"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a8c2c3f9134ec1c77288b6147c4249897">thresh_descriptor_match</a></td></tr>
<tr class="memdesc:a8c2c3f9134ec1c77288b6147c4249897"><td class="mdescLeft">&#160;</td><td class="mdescRight">Threshold for matches between descriptors. <br /></td></tr>
<tr class="separator:a8c2c3f9134ec1c77288b6147c4249897"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a575ed053aec5a34555ee9642b95765eb"><td class="memItemLeft" align="right" valign="top"><a id="a575ed053aec5a34555ee9642b95765eb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a575ed053aec5a34555ee9642b95765eb">max_matches</a></td></tr>
<tr class="memdesc:a575ed053aec5a34555ee9642b95765eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max number of matches when matching sets of descriptors. <br /></td></tr>
<tr class="separator:a575ed053aec5a34555ee9642b95765eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3acc93b77883137eba917691492674"><td class="memItemLeft" align="right" valign="top"><a id="a8a3acc93b77883137eba917691492674"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a8a3acc93b77883137eba917691492674">no_bundle_adjustment</a></td></tr>
<tr class="memdesc:a8a3acc93b77883137eba917691492674"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, bundle adjustment is never performed. <br /></td></tr>
<tr class="separator:a8a3acc93b77883137eba917691492674"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef231667d94cca21fe6afd15f6b7cc0"><td class="memItemLeft" align="right" valign="top"><a id="abef231667d94cca21fe6afd15f6b7cc0"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#abef231667d94cca21fe6afd15f6b7cc0">only_init</a></td></tr>
<tr class="memdesc:abef231667d94cca21fe6afd15f6b7cc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, no keyframes are created after initialization. <br /></td></tr>
<tr class="separator:abef231667d94cca21fe6afd15f6b7cc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac931ea7b0cb5591952779c5e5ab6192e"><td class="memItemLeft" align="right" valign="top"><a id="ac931ea7b0cb5591952779c5e5ab6192e"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ac931ea7b0cb5591952779c5e5ab6192e">outlier_threshold</a></td></tr>
<tr class="memdesc:ac931ea7b0cb5591952779c5e5ab6192e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Threshold on contribution to bundle adjustment objective for a point to be considered an outlier. <br /></td></tr>
<tr class="separator:ac931ea7b0cb5591952779c5e5ab6192e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7020f7c1d53310e0d8c6b616038fc0e"><td class="memItemLeft" align="right" valign="top"><a id="aa7020f7c1d53310e0d8c6b616038fc0e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aa7020f7c1d53310e0d8c6b616038fc0e">manual_keyframes</a></td></tr>
<tr class="memdesc:aa7020f7c1d53310e0d8c6b616038fc0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, keyframe decision is not made automatically, but when the user sends a message. <br /></td></tr>
<tr class="separator:aa7020f7c1d53310e0d8c6b616038fc0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2472bc3b74a98eb9158ad866727ffee0"><td class="memItemLeft" align="right" valign="top"><a id="a2472bc3b74a98eb9158ad866727ffee0"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a2472bc3b74a98eb9158ad866727ffee0">sonar_unavailable</a></td></tr>
<tr class="memdesc:a2472bc3b74a98eb9158ad866727ffee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set true for tests with the drone landed and sonar data is unavailable to use visual data instead. <br /></td></tr>
<tr class="separator:a2472bc3b74a98eb9158ad866727ffee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a794eea744a2ea7532fd6cf99a015410d"><td class="memItemLeft" align="right" valign="top"><a id="a794eea744a2ea7532fd6cf99a015410d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a794eea744a2ea7532fd6cf99a015410d">n_kf_local_ba</a></td></tr>
<tr class="memdesc:a794eea744a2ea7532fd6cf99a015410d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of keyframes to adjust when running local bundle adjustment. <br /></td></tr>
<tr class="separator:a794eea744a2ea7532fd6cf99a015410d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0452c93c8870a6cb76660fb75be202fb"><td class="memItemLeft" align="right" valign="top"><a id="a0452c93c8870a6cb76660fb75be202fb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a0452c93c8870a6cb76660fb75be202fb">freq_global_ba</a></td></tr>
<tr class="memdesc:a0452c93c8870a6cb76660fb75be202fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frequency at which to run global bundle adjustment. <br /></td></tr>
<tr class="separator:a0452c93c8870a6cb76660fb75be202fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45d93dc7966ef968d3730754526549ea"><td class="memItemLeft" align="right" valign="top"><a id="a45d93dc7966ef968d3730754526549ea"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a45d93dc7966ef968d3730754526549ea">min_dist</a></td></tr>
<tr class="memdesc:a45d93dc7966ef968d3730754526549ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimal distance to last keyframe to create a new one. <br /></td></tr>
<tr class="separator:a45d93dc7966ef968d3730754526549ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080c23dee123aa9c5ddabb012a43ea55"><td class="memItemLeft" align="right" valign="top"><a id="a080c23dee123aa9c5ddabb012a43ea55"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a080c23dee123aa9c5ddabb012a43ea55">min_time</a></td></tr>
<tr class="memdesc:a080c23dee123aa9c5ddabb012a43ea55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimal time between keyframes. <br /></td></tr>
<tr class="separator:a080c23dee123aa9c5ddabb012a43ea55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5695f2e241107aa812cc5c1826fef37"><td class="memItemLeft" align="right" valign="top"><a id="af5695f2e241107aa812cc5c1826fef37"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#af5695f2e241107aa812cc5c1826fef37">inliers_thresh</a></td></tr>
<tr class="memdesc:af5695f2e241107aa812cc5c1826fef37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a keyframe when less than this amount of RANSAC inliers. <br /></td></tr>
<tr class="separator:af5695f2e241107aa812cc5c1826fef37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35fc2ab0486f0f82512c0eb6bf4b1ccd"><td class="memItemLeft" align="right" valign="top"><a id="a35fc2ab0486f0f82512c0eb6bf4b1ccd"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a35fc2ab0486f0f82512c0eb6bf4b1ccd">FOV_thresh</a></td></tr>
<tr class="memdesc:a35fc2ab0486f0f82512c0eb6bf4b1ccd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a keyframe when more than this fraction of the screen has no keypoints (from any side) <br /></td></tr>
<tr class="separator:a35fc2ab0486f0f82512c0eb6bf4b1ccd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57996d0d3379ead3e4e7877db836ef33"><td class="memItemLeft" align="right" valign="top"><a id="a57996d0d3379ead3e4e7877db836ef33"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a57996d0d3379ead3e4e7877db836ef33">time_thresh</a></td></tr>
<tr class="memdesc:a57996d0d3379ead3e4e7877db836ef33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a keyframe when more time than this has elapsed since last one. <br /></td></tr>
<tr class="separator:a57996d0d3379ead3e4e7877db836ef33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0703cae7e706c952f45685a74d0626"><td class="memItemLeft" align="right" valign="top"><a id="afc0703cae7e706c952f45685a74d0626"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#afc0703cae7e706c952f45685a74d0626">dist_thresh</a></td></tr>
<tr class="memdesc:afc0703cae7e706c952f45685a74d0626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a keyframe when farther than this from last keyframe. <br /></td></tr>
<tr class="separator:afc0703cae7e706c952f45685a74d0626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42aaec155f0d5f18aeda45a0bebb5d71"><td class="memItemLeft" align="right" valign="top"><a id="a42aaec155f0d5f18aeda45a0bebb5d71"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a42aaec155f0d5f18aeda45a0bebb5d71">is_adjusting_bundle</a></td></tr>
<tr class="memdesc:a42aaec155f0d5f18aeda45a0bebb5d71"><td class="mdescLeft">&#160;</td><td class="mdescRight">True while bundle adjustment is running. <br /></td></tr>
<tr class="separator:a42aaec155f0d5f18aeda45a0bebb5d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a5af988716e8be41c5129fff01d73a"><td class="memItemLeft" align="right" valign="top"><a id="af5a5af988716e8be41c5129fff01d73a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#af5a5af988716e8be41c5129fff01d73a">n_inliers_moving_avg</a></td></tr>
<tr class="memdesc:af5a5af988716e8be41c5129fff01d73a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Average number of inliers in recent frames (far away frames have a lower weight in the average) <br /></td></tr>
<tr class="separator:af5a5af988716e8be41c5129fff01d73a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0395513a7ef43438f5ee965e3b9f2dd"><td class="memItemLeft" align="right" valign="top"><a id="aa0395513a7ef43438f5ee965e3b9f2dd"></a>
ros::Time&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aa0395513a7ef43438f5ee965e3b9f2dd">last_new_keyframe</a></td></tr>
<tr class="memdesc:aa0395513a7ef43438f5ee965e3b9f2dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time when a keyframe was last added. <br /></td></tr>
<tr class="separator:aa0395513a7ef43438f5ee965e3b9f2dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac029a5c3bdc1a95c39519a30c2435670"><td class="memItemLeft" align="right" valign="top"><a id="ac029a5c3bdc1a95c39519a30c2435670"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ac029a5c3bdc1a95c39519a30c2435670">kf_since_last_global_BA</a></td></tr>
<tr class="memdesc:ac029a5c3bdc1a95c39519a30c2435670"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of keyframes created since last time global bundle adjustment was run. <br /></td></tr>
<tr class="separator:ac029a5c3bdc1a95c39519a30c2435670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7183a0cc5d16367c2248eb7db0e6839a"><td class="memItemLeft" align="right" valign="top"><a id="a7183a0cc5d16367c2248eb7db0e6839a"></a>
std::vector&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a7183a0cc5d16367c2248eb7db0e6839a">BA_times</a></td></tr>
<tr class="memdesc:a7183a0cc5d16367c2248eb7db0e6839a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Times taken by bundle adjustment. <br /></td></tr>
<tr class="separator:a7183a0cc5d16367c2248eb7db0e6839a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d91c796d77673ab8751fe0549ee36aa"><td class="memItemLeft" align="right" valign="top"><a id="a5d91c796d77673ab8751fe0549ee36aa"></a>
std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a5d91c796d77673ab8751fe0549ee36aa">BA_num_iter</a></td></tr>
<tr class="memdesc:a5d91c796d77673ab8751fe0549ee36aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of iterations of bundle adjustment. <br /></td></tr>
<tr class="separator:a5d91c796d77673ab8751fe0549ee36aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3aacc2f037e8c13212129d34d0e161f"><td class="memItemLeft" align="right" valign="top"><a id="ad3aacc2f037e8c13212129d34d0e161f"></a>
<a class="el" href="structCamera.html">Camera</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#ad3aacc2f037e8c13212129d34d0e161f">camera</a></td></tr>
<tr class="memdesc:ad3aacc2f037e8c13212129d34d0e161f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structCamera.html">Camera</a> used during mapping. <br /></td></tr>
<tr class="separator:ad3aacc2f037e8c13212129d34d0e161f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c5f5b93d3b296eab01d0f0702822ae"><td class="memItemLeft" align="right" valign="top"><a id="a08c5f5b93d3b296eab01d0f0702822ae"></a>
ucl_drone::Pose3D&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a08c5f5b93d3b296eab01d0f0702822ae">manual_pose</a></td></tr>
<tr class="memdesc:a08c5f5b93d3b296eab01d0f0702822ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manual pose (received from user) if using it. <br /></td></tr>
<tr class="separator:a08c5f5b93d3b296eab01d0f0702822ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34358cab2d1f7415b9a55f9bcdb66cdb"><td class="memItemLeft" align="right" valign="top"><a id="a34358cab2d1f7415b9a55f9bcdb66cdb"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a34358cab2d1f7415b9a55f9bcdb66cdb">manual_pose_available</a></td></tr>
<tr class="memdesc:a34358cab2d1f7415b9a55f9bcdb66cdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">true when a manual pose is available <br /></td></tr>
<tr class="separator:a34358cab2d1f7415b9a55f9bcdb66cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dacbc072a53ef895f2c1fb018c29b43"><td class="memItemLeft" align="right" valign="top"><a id="a2dacbc072a53ef895f2c1fb018c29b43"></a>
std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a2dacbc072a53ef895f2c1fb018c29b43">landmark_IDs</a></td></tr>
<tr class="memdesc:a2dacbc072a53ef895f2c1fb018c29b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of IDs for each landmark in the map. <br /></td></tr>
<tr class="separator:a2dacbc072a53ef895f2c1fb018c29b43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a08612e9c0b4009aacafcf7668af0b3"><td class="memItemLeft" align="right" valign="top"><a id="a2a08612e9c0b4009aacafcf7668af0b3"></a>
std::map&lt; int, <a class="el" href="structLandmark.html">Landmark</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a2a08612e9c0b4009aacafcf7668af0b3">landmarks</a></td></tr>
<tr class="memdesc:a2a08612e9c0b4009aacafcf7668af0b3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classMap.html">Map</a> of landmark IDs to landmarks. <br /></td></tr>
<tr class="separator:a2a08612e9c0b4009aacafcf7668af0b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa46daeabf122cad6598cf684ee723884"><td class="memItemLeft" align="right" valign="top"><a id="aa46daeabf122cad6598cf684ee723884"></a>
std::map&lt; int, <a class="el" href="classKeyframe.html">Keyframe</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aa46daeabf122cad6598cf684ee723884">keyframes</a></td></tr>
<tr class="memdesc:aa46daeabf122cad6598cf684ee723884"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classMap.html">Map</a> of keyframe IDs to keyframes. <br /></td></tr>
<tr class="separator:aa46daeabf122cad6598cf684ee723884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54b766b2b43d23be965610d9c5ca16f2"><td class="memItemLeft" align="right" valign="top"><a id="a54b766b2b43d23be965610d9c5ca16f2"></a>
std::map&lt; int, <a class="el" href="classKeyframe.html">Keyframe</a> * &gt;::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a54b766b2b43d23be965610d9c5ca16f2">first_kf_to_adjust</a></td></tr>
<tr class="memdesc:a54b766b2b43d23be965610d9c5ca16f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterator to oldest keyframe to include in local bundle adjsutment. <br /></td></tr>
<tr class="separator:a54b766b2b43d23be965610d9c5ca16f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b528d6d4769cec76f32a66251faf4c"><td class="memItemLeft" align="right" valign="top"><a id="a28b528d6d4769cec76f32a66251faf4c"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a28b528d6d4769cec76f32a66251faf4c">descriptors</a></td></tr>
<tr class="memdesc:a28b528d6d4769cec76f32a66251faf4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">descriptors of landmarks <br /></td></tr>
<tr class="separator:a28b528d6d4769cec76f32a66251faf4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed26fe7354f99268588ebbcdd1718ba2"><td class="memItemLeft" align="right" valign="top"><a id="aed26fe7354f99268588ebbcdd1718ba2"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#aed26fe7354f99268588ebbcdd1718ba2">tvec</a></td></tr>
<tr class="memdesc:aed26fe7354f99268588ebbcdd1718ba2"><td class="mdescLeft">&#160;</td><td class="mdescRight">last translation vector (PnP estimation) <br /></td></tr>
<tr class="separator:aed26fe7354f99268588ebbcdd1718ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361dde7c4a9710f4d228bb32b7a596d7"><td class="memItemLeft" align="right" valign="top"><a id="a361dde7c4a9710f4d228bb32b7a596d7"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a361dde7c4a9710f4d228bb32b7a596d7">rvec</a></td></tr>
<tr class="memdesc:a361dde7c4a9710f4d228bb32b7a596d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">last rotational vector (PnP estimation) <br /></td></tr>
<tr class="separator:a361dde7c4a9710f4d228bb32b7a596d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a688d93e7daa5dacfdcf68041fc0ce683"><td class="memItemLeft" align="right" valign="top"><a id="a688d93e7daa5dacfdcf68041fc0ce683"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMap.html#a688d93e7daa5dacfdcf68041fc0ce683">threshold_lost</a> = 10</td></tr>
<tr class="memdesc:a688d93e7daa5dacfdcf68041fc0ce683"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drone is considered as lost when it has less RANSAC inliers than this. <br /></td></tr>
<tr class="separator:a688d93e7daa5dacfdcf68041fc0ce683"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This object wraps functions to execute the mapping task </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ad516c23a920c67aecee60a52acc09c98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad516c23a920c67aecee60a52acc09c98">&#9670;&nbsp;</a></span>doBundleAdjustment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Map::doBundleAdjustment </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt;&#160;</td>
          <td class="paramname"><em>kfIDs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_global</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare a bundle message and send it (to the bundle adjustment node) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">kfIDs</td><td>IDs of keyframes to adjust </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">is_global</td><td>If true, disregard kfIDs, and use all keyframes </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adcf461a96fe117cb8273a524b03bcd26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcf461a96fe117cb8273a524b03bcd26">&#9670;&nbsp;</a></span>doPnP()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Map::doPnP </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structFrame.html">Frame</a> &amp;&#160;</td>
          <td class="paramname"><em>current_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ucl_drone::Pose3D &amp;&#160;</td>
          <td class="paramname"><em>PnP_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>n_inliers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>inlier_coverage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method computes the PnP estimation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current_frame</td><td>The frame containing keypoints of the last camera observation </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">PnP_pose</td><td>The visual pose estimation </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">inliers</td><td>The indices of keypoints with a correct matching </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inlier_coverage</td><td>fraction of the screen without RANSAC inliers </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aab50e2ea33f3ea247488990047951987"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab50e2ea33f3ea247488990047951987">&#9670;&nbsp;</a></span>getPointsForBA()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Map::getPointsForBA </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>kfIDs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; int, std::map&lt; int, int &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get points to adjust for bundle adjustment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">kfIDs</td><td>IDs of keyframes to adjust </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">points</td><td><a class="el" href="classMap.html">Map</a> of all points seen by at least two of the keyframes in kfIDs </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad6cda6f3731694cede731fa8fa05155e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6cda6f3731694cede731fa8fa05155e">&#9670;&nbsp;</a></span>isInitialized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Map::isInitialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether map is isInitialized. </p>
<dl class="section return"><dt>Returns</dt><dd>true if map is isInitialized </dd></dl>

</div>
</div>
<a id="add1699053ae7e04cd83c897d3791bef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add1699053ae7e04cd83c897d3791bef5">&#9670;&nbsp;</a></span>keyframeNeeded()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Map::keyframeNeeded </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>manual_pose_received</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_inliers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>inlier_coverage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ucl_drone::Pose3D &amp;&#160;</td>
          <td class="paramname"><em>current_pose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decide whether a new keyframe is needed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">manual_pose_received</td><td>True is a manual pose was received (used when manual_keyframes=true) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">n_inliers</td><td>Number of RANSAC inliers </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">inlier_coverage</td><td>Fraction of the screen (in the frame) without RANSAC inliers </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">current_pose</td><td>Current estimated pose </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a new keyframe is needed </dd></dl>

</div>
</div>
<a id="ade3c9580af4b73c0468947f04def9930"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade3c9580af4b73c0468947f04def9930">&#9670;&nbsp;</a></span>matchKeyframes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Map::matchKeyframes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classKeyframe.html">Keyframe</a> *&#160;</td>
          <td class="paramname"><em>kf0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classKeyframe.html">Keyframe</a> *&#160;</td>
          <td class="paramname"><em>kf1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Match two keyframes and add any new matches to the map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">kf0</td><td>First keyframe to match </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">kf1</td><td>Second keyframe to match </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2d773b1af5301314878d0c84482976d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d773b1af5301314878d0c84482976d0">&#9670;&nbsp;</a></span>matchWithFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Map::matchWithFrame </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structFrame.html">Frame</a> &amp;&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; cv::Point3f &gt; &amp;&#160;</td>
          <td class="paramname"><em>inliers_map_matching_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; cv::Point2f &gt; &amp;&#160;</td>
          <td class="paramname"><em>inliers_frame_matching_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>inlier_coverage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Match a frame with the map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">frame</td><td>The frame to match </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">inliers_map_matching_points</td><td>The 3D points from the map with a match in the frame </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">inliers_frame_matching_points</td><td>The 2D points from the frame with a match in the map </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inlier_coverage</td><td>fraction of the screen (in the frame) without RANSAC inliers </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af98ac6aead03ee4b47a38b57240afd50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af98ac6aead03ee4b47a38b57240afd50">&#9670;&nbsp;</a></span>processFrame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Map::processFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structFrame.html">Frame</a> &amp;&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ucl_drone::Pose3D &amp;&#160;</td>
          <td class="paramname"><em>PnP_pose</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is called on each new frame, it calls pnp, and the decision to create a keyframe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">frame</td><td><a class="el" href="structFrame.html" title="A Frame object stores ImageProcessed message. ">Frame</a> to process (estimate position, and decide whether to craete a keyframe) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">PnP_pose</td><td>result of pnp (estimated pose) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1e548f20958c5719c79ca45ed8a8893a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e548f20958c5719c79ca45ed8a8893a">&#9670;&nbsp;</a></span>setPointAsSeen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Map::setPointAsSeen </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ptID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>kfID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idx_in_kf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Seta point as seen by a keyframe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptID</td><td>ID of point to be set as seen </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">kfID</td><td>ID of keyframe to be set as seeing the point </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idx_in_kf</td><td>Index of the point in the keyframe </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aefd9f26662bca1cf8e2963def923f558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefd9f26662bca1cf8e2963def923f558">&#9670;&nbsp;</a></span>updateBundle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Map::updateBundle </td>
          <td>(</td>
          <td class="paramtype">const ucl_drone::BundleMsg::ConstPtr&#160;</td>
          <td class="paramname"><em>bundlePtr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update a bundle Update keyframes and landmarks that were adjusted by the bundle adjustment node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bundlePtr</td><td><a class="el" href="classBundle.html" title="Contains bundle adjustment node. ">Bundle</a> message coming from the bundle adjustment node </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4338fe122941088dc90ed54dfb8e286d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4338fe122941088dc90ed54dfb8e286d">&#9670;&nbsp;</a></span>updatePoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Map::updatePoint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ptID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cv::Point3d&#160;</td>
          <td class="paramname"><em>new_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the coordinates of a landmark. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptID</td><td>ID of point to update </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_point</td><td>new coordinates of the point </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/ucl_drone/map/<a class="el" href="map_8h_source.html">map.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
