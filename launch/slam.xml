<?xml version="1.0"?>

<!-- Launch file for the starting mission for the thesis of Boris Dehem-->
<!-- Work In Progress -->
<launch>
  <arg name="threshold"              default="250" />
  <arg name="max_matches"            default="200"/>
  <arg name="no_bundle_adjustment"   default="false"/>
  <arg name="dlt_triangulation"      default="false"/>
  <arg name="midpoint_triangulation" default="false"/>
  <arg name="test_robustness"        default="false"/>
  <arg name="double_ba"              default="false"/>
  <arg name="bundle_adjustment_tol"  default="0.05"/>
  <arg name="quiet_ba"               default="false" />
  <arg name="rpt2"                   default="6" />
  <arg name="rpt3"                   default="-1" />
  <arg name="rpt4"                   default="-1" />
  <arg name="only_init"              default="false" />
  <arg name="remove_cst"             default="0" />
  <arg name="remove_coeff"           default="1.5" />
  <arg name="huber_delta"            default="1.0" />
  <arg name="manual_keyframes"       default="false" />

  <node name="image_proc_front" pkg="image_proc" type="image_proc" ns="ardrone/front"/>

  <node name="boris_drone_mapping_node" pkg="boris_drone" type="mapping_node" output="screen">
    <param name="2D_noise"               value="$(arg test_robustness)" />
    <!--<param name="3D_noise"               value="$(arg test_robustness)" />-->
    <param name="3D_noise"               value="false" />
    <param name="double_ba"              value="$(arg double_ba)"/>
    <param name="threshold_kf_match"     value="$(arg threshold)" />
    <param name="max_matches"            value="$(arg max_matches)" />
    <param name="no_bundle_adjustment"   value="$(arg no_bundle_adjustment)"/>
    <param name="dlt_triangulation"      value="$(arg dlt_triangulation)"/>
    <param name="midpoint_triangulation" value="$(arg midpoint_triangulation)"/>
    <param name="only_init"              value="$(arg only_init)"/>
    <param name="rpt2"                   value="$(arg rpt2)"/>
    <param name="rpt3"                   value="$(arg rpt3)"/>
    <param name="rpt4"                   value="$(arg rpt4)"/>
    <param name="remove_cst"             value="$(arg remove_cst)"/>
    <param name="remove_coeff"           value="$(arg remove_coeff)"/>
    <param name="manual_keyframes"       value="$(arg manual_keyframes)"/>
  </node>

  <node name="boris_drone_bundle_adjuster" pkg="boris_drone" type="bundle_adjuster" output="screen">
    <param name="bundle_adjustment_tol" value="$(arg bundle_adjustment_tol)" />
    <param name="quiet"                 value="$(arg quiet_ba)" />
    <param name="huber_delta"           value="$(arg huber_delta)"/>
  </node>
</launch>
